// ==================== Design System v3.0 ====================
// Apple Minimalist + Education Community Fusion
// 设计原则：极简、专业、清晰的信息层级、教育问答社区交互模式

// ==================== 核心色板 ====================

// 主色调 - Apple Blue (专业、信任)
$color-primary: #007AFF;
$color-primary-light: #5AC8FA;
$color-primary-dark: #0051D5;
$color-primary-bg: rgba(0, 122, 255, 0.06);
$color-primary-hover: rgba(0, 122, 255, 0.10);

// 语义色 - 问答状态
$color-success: #34C759; // 已解决/已回答
$color-success-bg: rgba(52, 199, 89, 0.1);
$color-warning: #FF9500; // 待回答/进行中
$color-warning-bg: rgba(255, 149, 0, 0.1);
$color-danger: #FF3B30; // 错误/关闭
$color-danger-bg: rgba(255, 59, 48, 0.1);
$color-info: #5856D6; // 信息/精选
$color-info-bg: rgba(88, 86, 214, 0.1);

// 中性色 - Apple Gray Scale
$color-gray-50: #FAFAFA;
$color-gray-100: #F5F5F7;
$color-gray-200: #E8E8ED;
$color-gray-300: #D2D2D7;
$color-gray-400: #AEAEB2;
$color-gray-500: #8E8E93;
$color-gray-600: #636366;
$color-gray-700: #48484A;
$color-gray-800: #3A3A3C;
$color-gray-900: #1D1D1F;

// 背景色
$bg-primary: #FFFFFF;
$bg-secondary: $color-gray-100;
$bg-tertiary: $color-gray-50;
$bg-elevated: #FFFFFF;

// 文字色
$text-primary: $color-gray-900;
$text-secondary: $color-gray-600;
$text-tertiary: $color-gray-500;
$text-placeholder: $color-gray-400;
$text-disabled: $color-gray-400;
$text-inverse: #FFFFFF;

// 边框色
$border-color: $color-gray-200;
$border-color-light: $color-gray-100;
$border-color-focus: $color-primary;

// ==================== 字体系统 ====================

$font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
  "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei",
  "Noto Sans SC", "Source Han Sans CN", "Segoe UI", Roboto, Arial, sans-serif;

$font-family-mono: "SF Mono", "Fira Code", "Consolas", "Monaco", monospace;

// 字号
$font-size-xs: 15px;
$font-size-sm: 17px;
$font-size-base: 19px;
$font-size-md: 21px;
$font-size-lg: 24px;
$font-size-xl: 28px;
$font-size-2xl: 32px;
$font-size-3xl: 38px;
$font-size-4xl: 44px;
$font-size-5xl: 52px;

// 字重
$font-weight-regular: 500;
$font-weight-normal: $font-weight-regular;
$font-weight-medium: 600;
$font-weight-semibold: 700;
$font-weight-bold: 800;

// 行高
$line-height-tight: 1.2;
$line-height-normal: 1.5;
$line-height-relaxed: 1.75;

// ==================== 间距系统 ====================

$spacing-1: 4px;
$spacing-2: 8px;
$spacing-3: 12px;
$spacing-4: 16px;
$spacing-5: 20px;
$spacing-6: 24px;
$spacing-8: 32px;
$spacing-10: 40px;
$spacing-12: 48px;
$spacing-16: 64px;

// Spacing aliases for legacy styles
$spacing-xs: $spacing-1;
$spacing-sm: $spacing-2;
$spacing-md: $spacing-3;
$spacing-lg: $spacing-5;
$spacing-xl: $spacing-8;
$spacing-2xl: $spacing-12;
$spacing-3xl: $spacing-16;

// ==================== 圆角 ====================

$radius-sm: 6px;
$radius-md: 10px;
$radius-lg: 14px;
$radius-xl: 20px;
$radius-2xl: 28px;
$radius-full: 9999px;

// Border + hover helpers
$border-width: 1px;
$bg-hover: rgba(0, 122, 255, 0.06);
$bg-active: $color-primary-hover;

// ==================== 阴影 - Apple 风格超柔和阴影 ====================

$shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.03);
$shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
$shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06);
$shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08);
$shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.10);
$shadow-2xl: 0 24px 64px rgba(0, 0, 0, 0.12);

// 卡片阴影 - 轻微上浮效果
$shadow-card: 0 1px 3px rgba(0, 0, 0, 0.04);
$shadow-card-hover: 0 8px 24px rgba(0, 0, 0, 0.08);

// 按钮阴影 - 极简
$shadow-btn: none;
$shadow-btn-hover: 0 2px 8px rgba(0, 0, 0, 0.08);
$shadow-btn-primary: 0 2px 8px rgba(0, 122, 255, 0.20);
$shadow-btn-primary-hover: 0 4px 12px rgba(0, 122, 255, 0.25);
$shadow-primary: 0 4px 12px rgba(0, 122, 255, 0.20);
$shadow-success: 0 4px 12px rgba(52, 199, 89, 0.20);
$shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.08);

// 兼容别名 (Neo -> Apple)
$shadow-neo-sm: $shadow-sm;
$shadow-neo-md: $shadow-md;
$shadow-neo-lg: $shadow-lg;
$shadow-neo-xl: $shadow-xl;
$shadow-neo-active: $shadow-xs;

// ==================== 动画 ====================

$transition-fast: 0.15s ease;
$transition-base: 0.2s ease;
$transition-slow: 0.3s ease;
$transition-spring: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);

// Typography helpers
$letter-spacing-tight: -0.01em;
$letter-spacing-wide: 0.04em;

// ==================== 断点 ====================

$breakpoint-sm: 640px;
$breakpoint-md: 768px;
$breakpoint-lg: 1024px;
$breakpoint-xl: 1280px;
$breakpoint-2xl: 1536px;

// ==================== 教育社区专用 ====================

// 问题状态色
$status-pending: $color-warning;
$status-answered: $color-success;
$status-closed: $color-gray-500;
$status-featured: $color-info;

// 角色色
$role-student: #AF52DE; // 紫色 - 学生
$role-student-bg: rgba(175, 82, 222, 0.1);
$role-teacher: #34C759; // 绿色 - 教师
$role-teacher-bg: rgba(52, 199, 89, 0.1);
$role-admin: #FF9500; // 橙色 - 管理员
$role-admin-bg: rgba(255, 149, 0, 0.1);

// Role color aliases (for backward compatibility)
$student-color: $role-student;
$teacher-color: $role-teacher;

// 科目标签色
$tag-math: #FF6B6B;
$tag-physics: #4ECDC4;
$tag-chemistry: #45B7D1;
$tag-biology: #96CEB4;
$tag-english: #DDA0DD;
$tag-chinese: #FFD93D;
$tag-history: #C9B037;
$tag-geography: #6BCB77;

// ==================== 组件变量 ====================

// 卡片
$card-bg: $bg-primary;
$card-border: $border-color;
$card-radius: $radius-lg;
$card-padding: $spacing-5;
$card-shadow: $shadow-sm;

// 按钮
$btn-height-sm: 32px;
$btn-height-md: 40px;
$btn-height-lg: 48px;
$btn-radius: $radius-md;
$btn-font-weight: $font-weight-medium;

// 输入框
$input-height: 44px;
$input-radius: $radius-md;
$input-border: $border-color;
$input-bg: $bg-primary;
$input-focus-border: $color-primary;

// 导航栏
$navbar-height: 64px;
$navbar-bg: rgba(255, 255, 255, 0.85);
$navbar-blur: 20px;
$navbar-border: $border-color-light;

// z-index
$z-dropdown: 1000;
$z-sticky: 1020;
$z-fixed: 1030;
$z-modal-backdrop: 1040;
$z-modal: 1050;
$z-popover: 1060;
$z-tooltip: 1070;

// Legacy z-index aliases
$z-index-fixed: $z-fixed;
$z-index-sticky: $z-sticky;
$z-index-modal: $z-modal;
$z-index-tooltip: $z-tooltip;

// ==================== 兼容旧变量（平滑过渡）====================

$primary-color: $color-primary;
$primary-light: $color-primary-light;
$primary-dark: $color-primary-dark;
$primary-hover: $color-primary-hover;
$success-color: $color-success;
$warning-color: $color-warning;
$danger-color: $color-danger;
$info-color: $color-info;

// Neo-Brutalism 兼容
$neo-black: $color-gray-900;
$neo-white: #FFFFFF;
$neo-cream: $color-gray-100;
$neo-yellow: #FFE9B5;
$neo-blue: $color-primary;
$neo-pink: #F4A8B8;
$neo-green: $color-success;
$neo-purple: #B7A6E6;
$neo-orange: $color-warning;
$neo-red: $color-danger;
$neo-blue-light: $color-primary-light;
$neo-blue-dark: $color-primary-dark;
$neo-green-dark: #1E9E52;
$neo-yellow-dark: #DFA500;
$neo-red-dark: #D62F25;
$neo-cyan: #32ADE6;
$neo-lime: #C1E899;
$ios-yellow: #FFCC00;

// Glass helpers
$glass-white-light: rgba(255, 255, 255, 0.78);
$glass-white: rgba(255, 255, 255, 0.85);
$glass-white-strong: rgba(255, 255, 255, 0.92);
$bg-glass: rgba(255, 255, 255, 0.70);
$glass-border: rgba(255, 255, 255, 0.6);

$bounce-curve: cubic-bezier(0.34, 1.56, 0.64, 1);

// ==================== Global Mixins ====================
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// ==================== Glassmorphism System v2.0 ====================

// 1. Glass Backgrounds (Layered Depth)
$glass-surface: rgba(255, 255, 255, 0.6); // Base layer (Page backgrounds)
$glass-card: rgba(255, 255, 255, 0.82); // Content cards
$glass-floating: rgba(255, 255, 255, 0.75); // Sticky headers/navs
$glass-popover: rgba(255, 255, 255, 0.75); // Dropdowns/Modals
$glass-accent: rgba(255, 255, 255, 0.95); // Active states/High contrast

// 2. Glass Borders (Subtle edges)
$glass-border-light: rgba(255, 255, 255, 0.6);
$glass-border-medium: rgba(255, 255, 255, 0.4);
$glass-border-strong: rgba(255, 255, 255, 0.8);

// 3. Glass Shadows (Glow + Depth)
// Uses multiple layers: soft colored glow + clean shadow + inner highlight
$shadow-glass-sm: 0 2px 8px rgba(0, 0, 0, 0.04),
  inset 0 1px 1px rgba(255, 255, 255, 0.6);

$shadow-glass-md: 0 8px 24px rgba(0, 0, 0, 0.06),
  inset 0 1px 1px rgba(255, 255, 255, 0.8);

$shadow-glass-lg: 0 16px 48px rgba(0, 0, 0, 0.1),
  inset 0 1px 1px rgba(255, 255, 255, 0.9);

$shadow-search-focused: 0 12px 40px rgba(0, 122, 255, 0.15),
  inset 0 0 0 1px rgba(0, 122, 255, 0.4);

// 4. Role-Specific Glass Tints (Subtle background tints)
$glass-tint-student: linear-gradient(135deg, rgba(175, 82, 222, 0.08) 0%, rgba(255, 255, 255, 0) 100%);
$glass-tint-teacher: linear-gradient(135deg, rgba(52, 199, 89, 0.08) 0%, rgba(255, 255, 255, 0) 100%);
$glass-tint-admin: linear-gradient(135deg, rgba(255, 149, 0, 0.08) 0%, rgba(255, 255, 255, 0) 100%);

// 5. Reference Accent Colors (1:1 Replica)
$re-purple: #8B80F9; // Main active purple
$re-purple-light: rgba(139, 128, 249, 0.2);
$re-orange: #F5A623; // Action orange
$re-blue: #4A90E2; // Subtle blue
$re-bg-dark: #12141D; // Background color underlying the blobs

// 6. Blur Levels
$blur-xs: 4px;
$blur-sm: 8px;
$blur-md: 16px;
$blur-lg: 24px;
$blur-xl: 40px;
$blur-vxl: 60px;