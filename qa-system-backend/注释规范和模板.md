# åç«¯ä»£ç æ³¨é‡Šè§„èŒƒå’Œæ¨¡æ¿

## ğŸ“š æ³¨é‡Šæ€»ä½“åŸåˆ™

###   æ³¨é‡Šæ ‡å‡†
1. **å‡è®¾è¯»è€…é›¶åŸºç¡€**ï¼šåƒç»™å®Œå…¨ä¸æ‡‚ç¼–ç¨‹çš„äººè§£é‡Š
2. **ç”¨ç”Ÿæ´»åŒ–æ¯”å–»**ï¼šç”¨ç°å®ä¸–ç•Œçš„ä¾‹å­æ¥ç±»æ¯”æŠ€æœ¯æ¦‚å¿µ
3. **è§£é‡Šä¸ºä»€ä¹ˆ**ï¼šä¸ä»…è¯´æ˜¯ä»€ä¹ˆ,è¿˜è¦è¯´ä¸ºä»€ä¹ˆè¿™æ ·åš
4. **æä¾›ç¤ºä¾‹**ï¼šç”¨å…·ä½“ä¾‹å­å±•ç¤ºå¦‚ä½•ä½¿ç”¨
5. **æ³¨æ„å®‰å…¨äº‹é¡¹**ï¼šæ ‡æ³¨å¯èƒ½çš„é£é™©å’Œæ³¨æ„äº‹é¡¹

---

## 1. å®ä½“ç±»(Entity)æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.io.Serializable;
import java.time.LocalDateTime;

/**
 * ã€å®ä½“ç±»åç§°ã€‘- å¯¹åº”æ•°æ®åº“è¡¨çš„Javaç±»
 * 
 * ğŸ¯ ä½œç”¨è¯´æ˜ï¼š
 * è¿™ä¸ªç±»ä»£è¡¨æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨,æ¯ä¸ªå¯¹è±¡å¯¹åº”è¡¨ä¸­çš„ä¸€è¡Œè®°å½•
 * å°±åƒä¸€å¼ ç™»è®°è¡¨,æ¯ä¸ªå­—æ®µå¯¹åº”è¡¨ä¸­çš„ä¸€åˆ—
 * 
 * ğŸ“Š å¯¹åº”æ•°æ®åº“è¡¨: table_name
 * 
 * ğŸ”‘ ä¸»è¦å­—æ®µï¼š
 * - id: ä¸»é”®,å”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½•
 * - name: åç§°
 * - ...æ›´å¤šå­—æ®µè¯´æ˜
 * 
 * ğŸ’¡ ä½¿ç”¨åœºæ™¯ï¼š
 * 1. ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®å,å°è£…æˆè¿™ä¸ªå¯¹è±¡
 * 2. éœ€è¦ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“æ—¶,åˆ›å»ºè¿™ä¸ªå¯¹è±¡
 * 3. åœ¨Serviceå’ŒControllerä¹‹é—´ä¼ é€’æ•°æ®
 * 
 * ğŸ“ æ³¨è§£è¯´æ˜ï¼š
 * @Data - Lombokæ³¨è§£,è‡ªåŠ¨ç”Ÿæˆgetterã€setterã€toStringç­‰æ–¹æ³•
 * @TableName - MyBatis-Plusæ³¨è§£,æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨å
 * implements Serializable - å…è®¸å¯¹è±¡åºåˆ—åŒ–,å¯ä»¥å­˜å…¥ç¼“å­˜æˆ–ç½‘ç»œä¼ è¾“
 * 
 * @author QA System Team
 * @version 1.0
 * @since 2024-01-01
 */
@Data  // è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å­—æ®µçš„getterã€setterã€equalsã€hashCodeã€toStringæ–¹æ³•
@TableName("table_name")  // æŒ‡å®šè¿™ä¸ªç±»å¯¹åº”æ•°æ®åº“çš„å“ªå¼ è¡¨
public class EntityName implements Serializable {

    /**
     * ä¸»é”®ID - å”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½•
     * 
     * @TableIdæ³¨è§£è¯´æ˜ï¼š
     * - type = IdType.AUTO: ä½¿ç”¨æ•°æ®åº“è‡ªå¢ç­–ç•¥
     * - æ’å…¥æ•°æ®æ—¶ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®,æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ†é…
     * 
     * ä¾‹å¦‚: ç¬¬ä¸€æ¡è®°å½•id=1, ç¬¬äºŒæ¡id=2, ä¾æ­¤ç±»æ¨
     */
    @TableId(type = IdType.AUTO)
    private Long id;

    /**
     * å­—æ®µåç§° - å­—æ®µç”¨é€”çš„è¯¦ç»†è¯´æ˜
     * 
     * ä¸šåŠ¡å«ä¹‰ï¼š
     * - è¿™ä¸ªå­—æ®µåœ¨ä¸šåŠ¡ä¸­ä»£è¡¨ä»€ä¹ˆ
     * - å¯èƒ½çš„å–å€¼èŒƒå›´æˆ–æ ¼å¼
     * 
     * æ•°æ®ç¤ºä¾‹: "ç¤ºä¾‹å€¼"
     * 
     * æ³¨æ„äº‹é¡¹ï¼š
     * - æ˜¯å¦å¿…å¡«
     * - é•¿åº¦é™åˆ¶
     * - ç‰¹æ®Šæ ¼å¼è¦æ±‚
     */
    private String fieldName;

    /**
     * çŠ¶æ€å­—æ®µ - è®°å½•çš„çŠ¶æ€
     * 
     * å¯é€‰å€¼ï¼š
     * - ACTIVE: æ¿€æ´»/æ­£å¸¸çŠ¶æ€
     * - INACTIVE: æœªæ¿€æ´»
     * - DELETED: å·²åˆ é™¤(è½¯åˆ é™¤)
     * 
     * é»˜è®¤å€¼: ACTIVE
     */
    private String status;

    /**
     * åˆ›å»ºæ—¶é—´ - è®°å½•ä½•æ—¶è¢«åˆ›å»º
     * 
     * @TableFieldæ³¨è§£è¯´æ˜ï¼š
     * - fill = FieldFill.INSERT: æ’å…¥æ•°æ®æ—¶è‡ªåŠ¨å¡«å……
     * - ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®,MyBatis-Plusä¼šè‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´
     * 
     * ç”¨é€”: 
     * - è¿½è¸ªæ•°æ®åˆ›å»ºæ—¶é—´
     * - æ•°æ®å®¡è®¡
     * - æŒ‰æ—¶é—´æ’åº
     */
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;

    /**
     * æ›´æ–°æ—¶é—´ - è®°å½•æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´
     * 
     * @TableFieldæ³¨è§£è¯´æ˜ï¼š
     * - fill = FieldFill.INSERT_UPDATE: æ’å…¥å’Œæ›´æ–°æ—¶éƒ½è‡ªåŠ¨å¡«å……
     * - æ¯æ¬¡ä¿®æ”¹è®°å½•æ—¶,è¿™ä¸ªå­—æ®µä¼šè‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´
     */
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;

    /**
     * é€»è¾‘åˆ é™¤æ ‡è¯† - æ ‡è®°è®°å½•æ˜¯å¦è¢«åˆ é™¤
     * 
     * @TableLogicæ³¨è§£è¯´æ˜ï¼š
     * - å¯ç”¨é€»è¾‘åˆ é™¤,æ•°æ®ä¸ä¼šçœŸæ­£ä»æ•°æ®åº“åˆ é™¤
     * - 0: æœªåˆ é™¤
     * - 1: å·²åˆ é™¤
     * 
     * ä¼˜ç‚¹ï¼š
     * - æ•°æ®å¯æ¢å¤
     * - ä¿ç•™å†å²è®°å½•
     * - ç»´æŠ¤æ•°æ®å®Œæ•´æ€§(é¿å…å¤–é”®é—®é¢˜)
     * 
     * æŸ¥è¯¢æ—¶MyBatis-Plusä¼šè‡ªåŠ¨è¿‡æ»¤æ‰deleted=1çš„è®°å½•
     */
    @TableLogic
    private Integer deleted;
}
```

---

## 2. Controlleræ§åˆ¶å™¨æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.controller;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.*;

/**
 * ã€æ¨¡å—åã€‘æ§åˆ¶å™¨ - å¤„ç†HTTPè¯·æ±‚çš„å…¥å£
 * 
 * ğŸ¯ æ ¸å¿ƒèŒè´£ï¼š
 * Controlleræ˜¯MVCæ¨¡å¼ä¸­çš„C,è´Ÿè´£:
 * 1. æ¥æ”¶å‰ç«¯HTTPè¯·æ±‚
 * 2. è°ƒç”¨Serviceå¤„ç†ä¸šåŠ¡é€»è¾‘
 * 3. å°†ç»“æœè¿”å›ç»™å‰ç«¯
 * 
 * å°±åƒé¤å…çš„æœåŠ¡å‘˜ï¼š
 * - æ¥æ”¶é¡¾å®¢ç‚¹å•(HTTPè¯·æ±‚)
 * - é€šçŸ¥åå¨åšèœ(è°ƒç”¨Service)
 * - æŠŠèœç«¯ç»™é¡¾å®¢(è¿”å›å“åº”)
 * 
 * ğŸŒ RESTfulæ¥å£è®¾è®¡ï¼š
 * åŸºç¡€è·¯å¾„: /api/v1/resource
 * - GET    /api/v1/resource       - æŸ¥è¯¢åˆ—è¡¨
 * - GET    /api/v1/resource/{id}  - æŸ¥è¯¢è¯¦æƒ…
 * - POST   /api/v1/resource       - åˆ›å»º
 * - PUT    /api/v1/resource/{id}  - æ›´æ–°
 * - DELETE /api/v1/resource/{id}  - åˆ é™¤
 * 
 * ğŸ” å®‰å…¨è¯´æ˜ï¼š
 * - éœ€è¦è®¤è¯: @PreAuthorize("hasRole('USER')")
 * - éœ€è¦ç‰¹å®šæƒé™: @PreAuthorize("hasRole('ADMIN')")
 * - å…¬å¼€è®¿é—®: æ— éœ€æ³¨è§£
 * 
 * ğŸ“ æ³¨è§£è¯´æ˜ï¼š
 * @Slf4j - å¯ç”¨æ—¥å¿—è®°å½•
 * @RestController - ç»„åˆæ³¨è§£,ç­‰åŒäº @Controller + @ResponseBody
 * @RequestMapping - å®šä¹‰åŸºç¡€URLè·¯å¾„
 * @RequiredArgsConstructor - è‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
 * 
 * @author QA System Team
 * @version 1.0
 */
@Slf4j  // è‡ªåŠ¨ç”Ÿæˆlogå¯¹è±¡,å¯ä»¥ç”¨log.info()ã€log.error()ç­‰è®°å½•æ—¥å¿—
@RestController  // æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªRESTé£æ ¼çš„æ§åˆ¶å™¨,æ‰€æœ‰æ–¹æ³•è¿”å›å€¼ä¼šè‡ªåŠ¨è½¬ä¸ºJSON
@RequestMapping("/api/v1/resource")  // è¿™ä¸ªæ§åˆ¶å™¨çš„æ‰€æœ‰æ¥å£éƒ½ä»¥è¿™ä¸ªè·¯å¾„å¼€å¤´
@RequiredArgsConstructor  // Lombokæ³¨è§£,ä¸ºfinalå­—æ®µè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°
public class ResourceController {

    // ä¾èµ–æ³¨å…¥: é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥Service
    // finalå…³é”®å­—ç¡®ä¿ä¾èµ–ä¸å¯å˜,çº¿ç¨‹å®‰å…¨
    private final ResourceService resourceService;

    /**
     * ğŸ“‹ æŸ¥è¯¢åˆ—è¡¨ - è·å–æ‰€æœ‰èµ„æºæˆ–åˆ†é¡µæŸ¥è¯¢
     * 
     * ä¸šåŠ¡æµç¨‹ï¼š
     * 1. æ¥æ”¶æŸ¥è¯¢å‚æ•°(é¡µç ã€æ¯é¡µæ•°é‡ã€ç­›é€‰æ¡ä»¶)
     * 2. è°ƒç”¨ServiceæŸ¥è¯¢æ•°æ®åº“
     * 3. è¿”å›ç»“æœåˆ—è¡¨ç»™å‰ç«¯
     * 
     * è¯·æ±‚ç¤ºä¾‹ï¼š
     * GET /api/v1/resource?page=1&size=10&keyword=search
     * 
     * å“åº”ç¤ºä¾‹ï¼š
     * {
     *   "code": 200,
     *   "message": "success",
     *   "data": {
     *     "records": [...],  // å½“å‰é¡µæ•°æ®
     *     "total": 100,      // æ€»è®°å½•æ•°
     *     "current": 1,      // å½“å‰é¡µç 
     *     "size": 10         // æ¯é¡µå¤§å°
     *   }
     * }
     * 
     * @param page é¡µç ,ä»1å¼€å§‹
     * @param size æ¯é¡µæ•°é‡,é»˜è®¤10æ¡
     * @param keyword æœç´¢å…³é”®è¯,å¯é€‰
     * @return åˆ†é¡µç»“æœ
     */
    @GetMapping  // å¤„ç†GETè¯·æ±‚,å®Œæ•´è·¯å¾„: /api/v1/resource
    public Result<Page<ResourceDTO>> list(
            @RequestParam(defaultValue = "1") Integer page,  // ä»URLå‚æ•°è·å–,é»˜è®¤å€¼1
            @RequestParam(defaultValue = "10") Integer size,  // ä»URLå‚æ•°è·å–,é»˜è®¤å€¼10
            @RequestParam(required = false) String keyword    // å¯é€‰å‚æ•°
    ) {
        // è®°å½•æ—¥å¿—,æ–¹ä¾¿æ’æŸ¥é—®é¢˜
        log.info("æŸ¥è¯¢èµ„æºåˆ—è¡¨: page={}, size={}, keyword={}", page, size, keyword);
        
        // è°ƒç”¨Serviceå¤„ç†ä¸šåŠ¡é€»è¾‘
        Page<ResourceDTO> result = resourceService.list(page, size, keyword);
        
        // è¿”å›ç»Ÿä¸€æ ¼å¼çš„æˆåŠŸå“åº”
        return Result.success(result);
    }

    /**
     * ğŸ” æŸ¥è¯¢è¯¦æƒ… - æ ¹æ®IDè·å–å•ä¸ªèµ„æºçš„è¯¦ç»†ä¿¡æ¯
     * 
     * ä¸šåŠ¡æµç¨‹ï¼š
     * 1. ä»URLè·¯å¾„ä¸­è·å–èµ„æºID
     * 2. è°ƒç”¨ServiceæŸ¥è¯¢æ•°æ®åº“
     * 3. å¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
     * 4. è¿”å›è¯¦ç»†ä¿¡æ¯ç»™å‰ç«¯
     * 
     * è¯·æ±‚ç¤ºä¾‹ï¼š
     * GET /api/v1/resource/123
     * 
     * å“åº”ç¤ºä¾‹ï¼š
     * {
     *   "code": 200,
     *   "message": "success",
     *   "data": {
     *     "id": 123,
     *     "name": "èµ„æºåç§°",
     *     ...
     *   }
     * }
     * 
     * @param id èµ„æºID,ä»URLè·¯å¾„ä¸­è·å–
     *           @PathVariable - ä»è·¯å¾„å˜é‡ä¸­æå–å‚æ•°
     * @return èµ„æºè¯¦æƒ…
     * @throws ResourceNotFoundException å½“èµ„æºä¸å­˜åœ¨æ—¶æŠ›å‡º
     */
    @GetMapping("/{id}")  // {id}æ˜¯è·¯å¾„å˜é‡,ä¾‹å¦‚: /api/v1/resource/123
    public Result<ResourceDTO> getById(@PathVariable Long id) {
        // è®°å½•è®¿é—®æ—¥å¿—
        log.info("æŸ¥è¯¢èµ„æºè¯¦æƒ…: id={}", id);
        
        // è°ƒç”¨ServiceæŸ¥è¯¢
        ResourceDTO resource = resourceService.getById(id);
        
        // è¿”å›ç»“æœ
        return Result.success(resource);
    }

    /**
     * â• åˆ›å»ºèµ„æº - æ–°å¢ä¸€æ¡è®°å½•
     * 
     * ä¸šåŠ¡æµç¨‹ï¼š
     * 1. æ¥æ”¶å‰ç«¯æäº¤çš„JSONæ•°æ®
     * 2. éªŒè¯æ•°æ®åˆæ³•æ€§(@Validæ³¨è§£è§¦å‘)
     * 3. è°ƒç”¨Serviceä¿å­˜åˆ°æ•°æ®åº“
     * 4. è¿”å›æ–°åˆ›å»ºçš„èµ„æºä¿¡æ¯(åŒ…å«ID)
     * 
     * è¯·æ±‚ç¤ºä¾‹ï¼š
     * POST /api/v1/resource
     * Content-Type: application/json
     * {
     *   "name": "æ–°èµ„æº",
     *   "description": "æè¿°ä¿¡æ¯"
     * }
     * 
     * å“åº”ç¤ºä¾‹ï¼š
     * {
     *   "code": 200,
     *   "message": "åˆ›å»ºæˆåŠŸ",
     *   "data": {
     *     "id": 124,  // æ–°ç”Ÿæˆçš„ID
     *     "name": "æ–°èµ„æº",
     *     ...
     *   }
     * }
     * 
     * @param request åˆ›å»ºè¯·æ±‚å¯¹è±¡,åŒ…å«èµ„æºä¿¡æ¯
     *                @Valid - è§¦å‘JSR-303å‚æ•°æ ¡éªŒ
     *                @RequestBody - ä»HTTPè¯·æ±‚ä½“ååºåˆ—åŒ–JSON
     * @return æ–°åˆ›å»ºçš„èµ„æºä¿¡æ¯
     */
    @PostMapping  // å¤„ç†POSTè¯·æ±‚,ç”¨äºåˆ›å»ºèµ„æº
    public Result<ResourceDTO> create(
            @Valid @RequestBody CreateResourceRequest request
    ) {
        // è®°å½•æ“ä½œæ—¥å¿—,ä¸è®°å½•æ•æ„Ÿä¿¡æ¯
        log.info("åˆ›å»ºèµ„æº: name={}", request.getName());
        
        // è°ƒç”¨Serviceåˆ›å»ºèµ„æº
        ResourceDTO resource = resourceService.create(request);
        
        // è¿”å›æˆåŠŸå“åº”
        return Result.success("åˆ›å»ºæˆåŠŸ", resource);
    }

    /**
     * âœï¸ æ›´æ–°èµ„æº - ä¿®æ”¹å·²å­˜åœ¨çš„è®°å½•
     * 
     * ä¸šåŠ¡æµç¨‹ï¼š
     * 1. ä»è·¯å¾„è·å–è¦æ›´æ–°çš„èµ„æºID
     * 2. ä»è¯·æ±‚ä½“è·å–æ›´æ–°å†…å®¹
     * 3. éªŒè¯èµ„æºæ˜¯å¦å­˜åœ¨
     * 4. æ›´æ–°æ•°æ®åº“è®°å½•
     * 5. è¿”å›æ›´æ–°åçš„ä¿¡æ¯
     * 
     * è¯·æ±‚ç¤ºä¾‹ï¼š
     * PUT /api/v1/resource/123
     * Content-Type: application/json
     * {
     *   "name": "ä¿®æ”¹åçš„åç§°",
     *   "description": "ä¿®æ”¹åçš„æè¿°"
     * }
     * 
     * @param id èµ„æºID,ä»è·¯å¾„è·å–
     * @param request æ›´æ–°è¯·æ±‚å¯¹è±¡,åŒ…å«è¦ä¿®æ”¹çš„å­—æ®µ
     * @return æ›´æ–°åçš„èµ„æºä¿¡æ¯
     */
    @PutMapping("/{id}")  // å¤„ç†PUTè¯·æ±‚,ç”¨äºå®Œæ•´æ›´æ–°
    public Result<ResourceDTO> update(
            @PathVariable Long id,
            @Valid @RequestBody UpdateResourceRequest request
    ) {
        log.info("æ›´æ–°èµ„æº: id={}", id);
        
        // è°ƒç”¨Serviceæ›´æ–°
        ResourceDTO resource = resourceService.update(id, request);
        
        return Result.success("æ›´æ–°æˆåŠŸ", resource);
    }

    /**
     * ï¿½ï¿½ï¿½ï¿½ åˆ é™¤èµ„æº - åˆ é™¤æŒ‡å®šè®°å½•(é€»è¾‘åˆ é™¤)
     * 
     * ä¸šåŠ¡æµç¨‹ï¼š
     * 1. ä»è·¯å¾„è·å–è¦åˆ é™¤çš„èµ„æºID
     * 2. éªŒè¯èµ„æºæ˜¯å¦å­˜åœ¨
     * 3. æ£€æŸ¥æ˜¯å¦æœ‰æƒé™åˆ é™¤(å¯èƒ½éœ€è¦æ˜¯åˆ›å»ºè€…æˆ–ç®¡ç†å‘˜)
     * 4. æ ‡è®°ä¸ºå·²åˆ é™¤(é€»è¾‘åˆ é™¤,ä¸çœŸæ­£åˆ é™¤)
     * 5. è¿”å›æˆåŠŸå“åº”
     * 
     * é€»è¾‘åˆ é™¤ vs ç‰©ç†åˆ é™¤ï¼š
     * - é€»è¾‘åˆ é™¤: åªæ ‡è®°deleted=1,æ•°æ®è¿˜åœ¨,å¯ä»¥æ¢å¤
     * - ç‰©ç†åˆ é™¤: çœŸæ­£ä»æ•°æ®åº“åˆ é™¤,æ— æ³•æ¢å¤
     * - å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯å»ºè®®ä½¿ç”¨é€»è¾‘åˆ é™¤
     * 
     * è¯·æ±‚ç¤ºä¾‹ï¼š
     * DELETE /api/v1/resource/123
     * 
     * @param id è¦åˆ é™¤çš„èµ„æºID
     * @return æˆåŠŸå“åº”,æ— æ•°æ®è¿”å›
     */
    @DeleteMapping("/{id}")  // å¤„ç†DELETEè¯·æ±‚
    public Result<Void> delete(@PathVariable Long id) {
        log.info("åˆ é™¤èµ„æº: id={}", id);
        
        // è°ƒç”¨Serviceåˆ é™¤
        resourceService.delete(id);
        
        // è¿”å›æˆåŠŸå“åº”,dataä¸ºnull
        return Result.success("åˆ é™¤æˆåŠŸ", null);
    }
}
```

---

## 3. ServiceæœåŠ¡å±‚æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.service.impl;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/**
 * ã€æ¨¡å—åã€‘æœåŠ¡å®ç°ç±» - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¤„ç†
 * 
 * ğŸ¯ èŒè´£è¯´æ˜ï¼š
 * Serviceæ˜¯ä¸šåŠ¡é€»è¾‘å±‚,å°±åƒé¤å…çš„å¨å¸ˆ:
 * - Controlleræ˜¯æœåŠ¡å‘˜,æ¥æ”¶è®¢å•
 * - Serviceæ˜¯å¨å¸ˆ,å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
 * - Mapperæ˜¯ä»“åº“ç®¡ç†å‘˜,ä»æ•°æ®åº“å­˜å–æ•°æ®
 * 
 * ä¸»è¦èŒè´£ï¼š
 * 1. å®ç°ä¸šåŠ¡é€»è¾‘è§„åˆ™
 * 2. åè°ƒå¤šä¸ªMapperå®Œæˆå¤æ‚æ“ä½œ
 * 3. å¤„ç†äº‹åŠ¡(ä¿è¯æ•°æ®ä¸€è‡´æ€§)
 * 4. æ•°æ®éªŒè¯å’Œè½¬æ¢
 * 5. ç¼“å­˜ç®¡ç†
 * 
 * ğŸ”„ åˆ†å±‚äº¤äº’ï¼š
 * Controller -> Service -> Mapper -> Database
 *    â†“          â†“          â†“
 *  æ¥æ”¶è¯·æ±‚   ä¸šåŠ¡å¤„ç†   æ•°æ®è®¿é—®
 * 
 * ğŸ“ æ³¨è§£è¯´æ˜ï¼š
 * @Slf4j - æ—¥å¿—è®°å½•
 * @Service - SpringæœåŠ¡ç»„ä»¶,ä¼šè¢«è‡ªåŠ¨æ‰«æå’Œæ³¨å†Œ
 * @RequiredArgsConstructor - æ„é€ å‡½æ•°æ³¨å…¥
 * @Transactional - äº‹åŠ¡ç®¡ç†
 * 
 * @author QA System Team
 * @version 1.0
 */
@Slf4j
@Service  // æ ‡è®°ä¸ºæœåŠ¡å±‚ç»„ä»¶
@RequiredArgsConstructor  // è‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°
public class ResourceServiceImpl implements ResourceService {

    // ä¾èµ–æ³¨å…¥çš„Mapper,ç”¨äºæ•°æ®åº“æ“ä½œ
    private final ResourceMapper resourceMapper;
    // å¯èƒ½éœ€è¦çš„å…¶ä»–ä¾èµ–
    private final RedisUtil redisUtil;  // Redisç¼“å­˜å·¥å…·
    private final JwtUtil jwtUtil;      // JWTå·¥å…·

    /**
     * æŸ¥è¯¢èµ„æºåˆ—è¡¨(å¸¦åˆ†é¡µå’Œæœç´¢)
     * 
     * ä¸šåŠ¡é€»è¾‘ï¼š
     * 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶
     * 2. æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢
     * 3. è½¬æ¢Entityä¸ºDTO(éšè—æ•æ„Ÿå­—æ®µ)
     * 4. å¯é€‰:æ·»åŠ ç¼“å­˜åŠ é€Ÿè®¿é—®
     * 
     * æ€§èƒ½ä¼˜åŒ–ï¼š
     * - ä½¿ç”¨MyBatis-Plusåˆ†é¡µæ’ä»¶
     * - åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
     * - çƒ­ç‚¹æ•°æ®ä½¿ç”¨Redisç¼“å­˜
     * 
     * @param page é¡µç 
     * @param size æ¯é¡µå¤§å°
     * @param keyword æœç´¢å…³é”®è¯
     * @return åˆ†é¡µç»“æœ
     */
    @Override
    public Page<ResourceDTO> list(Integer page, Integer size, String keyword) {
        // è®°å½•æŸ¥è¯¢æ—¥å¿—
        log.info("æŸ¥è¯¢èµ„æºåˆ—è¡¨: page={}, size={}, keyword={}", page, size, keyword);
        
        // æ„å»ºåˆ†é¡µå¯¹è±¡
        Page<Resource> pageParam = new Page<>(page, size);
        
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<Resource> wrapper = new LambdaQueryWrapper<>();
        // å¦‚æœæœ‰å…³é”®è¯,æ¨¡ç³ŠæŸ¥è¯¢nameå­—æ®µ
        if (keyword != null && !keyword.trim().isEmpty()) {
            wrapper.like(Resource::getName, keyword);
        }
        // æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—
        wrapper.orderByDesc(Resource::getCreateTime);
        
        // æ‰§è¡ŒæŸ¥è¯¢
        Page<Resource> result = resourceMapper.selectPage(pageParam, wrapper);
        
        // è½¬æ¢Entityä¸ºDTO
        // ä¸ºä»€ä¹ˆè¦è½¬æ¢?
        // 1. éšè—æ•æ„Ÿå­—æ®µ(å¦‚å¯†ç )
        // 2. ç»„åˆå¤šä¸ªè¡¨çš„æ•°æ®
        // 3. æ ¼å¼åŒ–æ—¥æœŸç­‰å­—æ®µ
        Page<ResourceDTO> dtoPage = new Page<>(result.getCurrent(), result.getSize(), result.getTotal());
        List<ResourceDTO> dtoList = result.getRecords().stream()
                .map(this::convertToDTO)
                .collect(Collectors.toList());
        dtoPage.setRecords(dtoList);
        
        return dtoPage;
    }

    /**
     * åˆ›å»ºèµ„æº - æ–°å¢è®°å½•åˆ°æ•°æ®åº“
     * 
     * ä¸šåŠ¡é€»è¾‘ï¼š
     * 1. æ•°æ®éªŒè¯(å¿…å¡«é¡¹ã€æ ¼å¼ç­‰)
     * 2. ä¸šåŠ¡è§„åˆ™æ£€æŸ¥(å¦‚åç§°æ˜¯å¦é‡å¤)
     * 3. è®¾ç½®é»˜è®¤å€¼
     * 4. ä¿å­˜åˆ°æ•°æ®åº“
     * 5. æ¸…é™¤ç›¸å…³ç¼“å­˜
     * 6. è®°å½•æ“ä½œæ—¥å¿—
     * 
     * äº‹åŠ¡è¯´æ˜ï¼š
     * @Transactionalæ³¨è§£ç¡®ä¿åŸå­æ€§
     * - æ‰€æœ‰æ“ä½œæˆåŠŸæ‰æäº¤
     * - ä»»ä½•å¼‚å¸¸éƒ½ä¼šå›æ»š
     * - ä¿è¯æ•°æ®ä¸€è‡´æ€§
     * 
     * @param request åˆ›å»ºè¯·æ±‚
     * @return åˆ›å»ºæˆåŠŸçš„èµ„æºä¿¡æ¯
     * @throws BusinessException å½“ä¸šåŠ¡è§„åˆ™ä¸æ»¡è¶³æ—¶æŠ›å‡º
     */
    @Override
    @Transactional(rollbackFor = Exception.class)  // å¼€å¯äº‹åŠ¡,ä»»ä½•å¼‚å¸¸éƒ½å›æ»š
    public ResourceDTO create(CreateResourceRequest request) {
        log.info("å¼€å§‹åˆ›å»ºèµ„æº: name={}", request.getName());
        
        // æ­¥éª¤1: ä¸šåŠ¡è§„åˆ™éªŒè¯
        // æ£€æŸ¥åç§°æ˜¯å¦å·²å­˜åœ¨
        LambdaQueryWrapper<Resource> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(Resource::getName, request.getName());
        Long count = resourceMapper.selectCount(wrapper);
        if (count > 0) {
            // æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸,äº‹åŠ¡ä¼šè‡ªåŠ¨å›æ»š
            throw new BusinessException("èµ„æºåç§°å·²å­˜åœ¨");
        }
        
        // æ­¥éª¤2: åˆ›å»ºå®ä½“å¯¹è±¡
        Resource resource = new Resource();
        resource.setName(request.getName());
        resource.setDescription(request.getDescription());
        // è®¾ç½®é»˜è®¤å€¼
        resource.setStatus("ACTIVE");
        // createTimeå’ŒupdateTimeç”±MyBatis-Plusè‡ªåŠ¨å¡«å……
        
        // æ­¥éª¤3: ä¿å­˜åˆ°æ•°æ®åº“
        // MyBatis-Plusä¼šè‡ªåŠ¨è®¾ç½®ID
        int rows = resourceMapper.insert(resource);
        if (rows == 0) {
            throw new BusinessException("åˆ›å»ºå¤±è´¥");
        }
        
        // æ­¥éª¤4: æ¸…é™¤åˆ—è¡¨ç¼“å­˜(å¦‚æœä½¿ç”¨äº†ç¼“å­˜)
        // redisUtil.delete("resource:list:*");
        
        // æ­¥éª¤5: è®°å½•æ“ä½œæ—¥å¿—
        log.info("èµ„æºåˆ›å»ºæˆåŠŸ: id={}, name={}", resource.getId(), resource.getName());
        
        // æ­¥éª¤6: è½¬æ¢å¹¶è¿”å›DTO
        return convertToDTO(resource);
    }

    /**
     * æ›´æ–°èµ„æº - ä¿®æ”¹å·²å­˜åœ¨çš„è®°å½•
     * 
     * ä¸šåŠ¡é€»è¾‘ï¼š
     * 1. éªŒè¯èµ„æºæ˜¯å¦å­˜åœ¨
     * 2. æ£€æŸ¥ä¿®æ”¹æƒé™(å¯èƒ½éœ€è¦æ˜¯åˆ›å»ºè€…)
     * 3. æ›´æ–°å­—æ®µ
     * 4. ä¿å­˜åˆ°æ•°æ®åº“
     * 5. æ¸…é™¤ç›¸å…³ç¼“å­˜
     * 
     * @param id èµ„æºID
     * @param request æ›´æ–°è¯·æ±‚
     * @return æ›´æ–°åçš„èµ„æºä¿¡æ¯
     */
    @Override
    @Transactional(rollbackFor = Exception.class)
    public ResourceDTO update(Long id, UpdateResourceRequest request) {
        log.info("æ›´æ–°èµ„æº: id={}", id);
        
        // æŸ¥è¯¢èµ„æºæ˜¯å¦å­˜åœ¨
        Resource resource = resourceMapper.selectById(id);
        if (resource == null) {
            throw new BusinessException("èµ„æºä¸å­˜åœ¨");
        }
        
        // æ›´æ–°å­—æ®µ
        resource.setName(request.getName());
        resource.setDescription(request.getDescription());
        // updateTimeä¼šè‡ªåŠ¨æ›´æ–°
        
        // ä¿å­˜åˆ°æ•°æ®åº“
        int rows = resourceMapper.updateById(resource);
        if (rows == 0) {
            throw new BusinessException("æ›´æ–°å¤±è´¥");
        }
        
        // æ¸…é™¤ç¼“å­˜
        // redisUtil.delete("resource:detail:" + id);
        
        log.info("èµ„æºæ›´æ–°æˆåŠŸ: id={}", id);
        
        return convertToDTO(resource);
    }

    /**
     * åˆ é™¤èµ„æº - é€»è¾‘åˆ é™¤
     * 
     * ä¸šåŠ¡é€»è¾‘ï¼š
     * 1. éªŒè¯èµ„æºæ˜¯å¦å­˜åœ¨
     * 2. æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆ é™¤(å¦‚æ˜¯å¦æœ‰å…³è”æ•°æ®)
     * 3. æ‰§è¡Œé€»è¾‘åˆ é™¤
     * 4. æ¸…é™¤ç¼“å­˜
     * 
     * é€»è¾‘åˆ é™¤è¯´æ˜ï¼š
     * - MyBatis-Plusçš„@TableLogicæ³¨è§£
     * - è°ƒç”¨deleteByIdå®é™…æ‰§è¡Œçš„æ˜¯UPDATEè¯­å¥
     * - è®¾ç½®deleted=1è€Œä¸æ˜¯çœŸæ­£åˆ é™¤
     * 
     * @param id èµ„æºID
     */
    @Override
    @Transactional(rollbackFor = Exception.class)
    public void delete(Long id) {
        log.info("åˆ é™¤èµ„æº: id={}", id);
        
        // éªŒè¯å­˜åœ¨æ€§
        Resource resource = resourceMapper.selectById(id);
        if (resource == null) {
            throw new BusinessException("èµ„æºä¸å­˜åœ¨");
        }
        
        // æ£€æŸ¥æ˜¯å¦æœ‰å…³è”æ•°æ®
        // ä¾‹å¦‚:æ£€æŸ¥æ˜¯å¦æœ‰å…³è”çš„è®¢å•ç­‰
        // if (hasRelatedData(id)) {
        //     throw new BusinessException("è¯¥èµ„æºæœ‰å…³è”æ•°æ®,æ— æ³•åˆ é™¤");
        // }
        
        // æ‰§è¡Œé€»è¾‘åˆ é™¤
        // å®é™…æ‰§è¡Œ: UPDATE resource SET deleted=1 WHERE id=?
        int rows = resourceMapper.deleteById(id);
        if (rows == 0) {
            throw new BusinessException("åˆ é™¤å¤±è´¥");
        }
        
        // æ¸…é™¤ç¼“å­˜
        // redisUtil.delete("resource:detail:" + id);
        
        log.info("èµ„æºåˆ é™¤æˆåŠŸ: id={}", id);
    }

    /**
     * Entityè½¬DTO - æ•°æ®ä¼ è¾“å¯¹è±¡è½¬æ¢
     * 
     * ä¸ºä»€ä¹ˆéœ€è¦è½¬æ¢?
     * - Entity: æ•°æ®åº“å®ä½“,åŒ…å«æ‰€æœ‰å­—æ®µ
     * - DTO: æ•°æ®ä¼ è¾“å¯¹è±¡,åªåŒ…å«éœ€è¦è¿”å›çš„å­—æ®µ
     * 
     * è½¬æ¢çš„ä½œç”¨ï¼š
     * 1. éšè—æ•æ„Ÿå­—æ®µ(å¯†ç ã€åˆ é™¤æ ‡è®°ç­‰)
     * 2. ç»„åˆå¤šè¡¨æ•°æ®
     * 3. æ ¼å¼åŒ–è¾“å‡º(æ—¥æœŸæ ¼å¼ã€é‡‘é¢æ ¼å¼ç­‰)
     * 4. æ·»åŠ è®¡ç®—å­—æ®µ
     * 
     * @param entity æ•°æ®åº“å®ä½“
     * @return DTOå¯¹è±¡
     */
    private ResourceDTO convertToDTO(Resource entity) {
        ResourceDTO dto = new ResourceDTO();
        dto.setId(entity.getId());
        dto.setName(entity.getName());
        dto.setDescription(entity.getDescription());
        dto.setStatus(entity.getStatus());
        // æ ¼å¼åŒ–æ—¥æœŸ
        dto.setCreateTime(entity.getCreateTime());
        // ä¸è¿”å›deletedå­—æ®µ(å†…éƒ¨å­—æ®µ)
        return dto;
    }
}
```

---

## 4. Mapperæ¥å£æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

/**
 * ã€è¡¨åã€‘Mapperæ¥å£ - æ•°æ®è®¿é—®å±‚
 * 
 * ğŸ¯ ä½œç”¨è¯´æ˜ï¼š
 * Mapperæ˜¯æ•°æ®è®¿é—®å±‚(DAO),è´Ÿè´£ä¸æ•°æ®åº“äº¤äº’
 * å°±åƒä»“åº“ç®¡ç†å‘˜,è´Ÿè´£å­˜å–æ•°æ®
 * 
 * MyBatis-Plus BaseMapperæä¾›çš„åŸºç¡€æ–¹æ³•ï¼š
 * 1. insert(T entity) - æ’å…¥ä¸€æ¡è®°å½•
 * 2. deleteById(Serializable id) - æ ¹æ®IDåˆ é™¤
 * 3. updateById(T entity) - æ ¹æ®IDæ›´æ–°
 * 4. selectById(Serializable id) - æ ¹æ®IDæŸ¥è¯¢
 * 5. selectList(Wrapper<T> wrapper) - æ¡ä»¶æŸ¥è¯¢åˆ—è¡¨
 * 6. selectPage(Page<T> page, Wrapper<T> wrapper) - åˆ†é¡µæŸ¥è¯¢
 * ...è¿˜æœ‰å¾ˆå¤šä¾¿æ·æ–¹æ³•
 * 
 * ä½¿ç”¨æ–¹å¼ï¼š
 * 1. ç»§æ‰¿BaseMapper<Entity>è·å¾—åŸºç¡€CRUDæ–¹æ³•
 * 2. è‡ªå®šä¹‰æ–¹æ³•ç”¨@Select/@Insert/@Update/@Deleteæ³¨è§£
 * 3. å¤æ‚SQLå†™åœ¨XMLæ–‡ä»¶ä¸­
 * 
 * ğŸ“ æ³¨è§£è¯´æ˜ï¼š
 * @Mapper - æ ‡è®°ä¸ºMyBatisçš„Mapperæ¥å£
 * BaseMapper<T> - MyBatis-Plusæä¾›çš„åŸºç¡€Mapper
 * 
 * @author QA System Team
 * @version 1.0
 */
@Mapper  // å‘Šè¯‰MyBatisè¿™æ˜¯ä¸€ä¸ªMapperæ¥å£,ä¼šè¢«è‡ªåŠ¨æ‰«æ
public interface ResourceMapper extends BaseMapper<Resource> {
    // ç»§æ‰¿BaseMapperå,æ— éœ€å†™åŸºç¡€çš„CRUDæ–¹æ³•
    // å·²ç»è‡ªåŠ¨æ‹¥æœ‰äº†insertã€deleteã€updateã€selectç­‰æ–¹æ³•

    /**
     * æ ¹æ®åç§°æŸ¥è¯¢èµ„æº - è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•
     * 
     * æ–¹æ³•å‘½åè§„èŒƒï¼š
     * - selectXxx: æŸ¥è¯¢æ–¹æ³•
     * - updateXxx: æ›´æ–°æ–¹æ³•
     * - deleteXxx: åˆ é™¤æ–¹æ³•
     * - insertXxx: æ’å…¥æ–¹æ³•
     * 
     * @param name èµ„æºåç§°
     * @return åŒ¹é…çš„èµ„æºå¯¹è±¡,å¯èƒ½ä¸ºnull
     * 
     * SQLå®ç°æ–¹å¼1: æ³¨è§£æ–¹å¼(ç®€å•SQL)
     * @Select("SELECT * FROM resource WHERE name = #{name} AND deleted = 0")
     * Resource selectByName(@Param("name") String name);
     * 
     * SQLå®ç°æ–¹å¼2: XMLæ–¹å¼(å¤æ‚SQL)
     * åœ¨ resources/mapper/ResourceMapper.xml ä¸­å®šä¹‰:
     * <select id="selectByName" resultType="Resource">
     *     SELECT * FROM resource 
     *     WHERE name = #{name} AND deleted = 0
     * </select>
     */
    Resource selectByName(@Param("name") String name);

    /**
     * ç»Ÿè®¡æŒ‡å®šçŠ¶æ€çš„èµ„æºæ•°é‡ - ç»Ÿè®¡æŸ¥è¯¢
     * 
     * @param status èµ„æºçŠ¶æ€
     * @return ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°
     * 
     * SQLå®ç°(æ³¨è§£æ–¹å¼):
     * @Select("SELECT COUNT(*) FROM resource WHERE status = #{status} AND deleted = 0")
     * Long countByStatus(@Param("status") String status);
     */
    Long countByStatus(@Param("status") String status);

    /**
     * æ‰¹é‡æ›´æ–°èµ„æºçŠ¶æ€ - æ‰¹é‡æ“ä½œ
     * 
     * ä½¿ç”¨åœºæ™¯:
     * - æ‰¹é‡å¯ç”¨/ç¦ç”¨
     * - æ‰¹é‡å®¡æ ¸é€šè¿‡/æ‹’ç»
     * 
     * @param ids èµ„æºIDåˆ—è¡¨
     * @param status ç›®æ ‡çŠ¶æ€
     * @return å½±å“çš„è¡Œæ•°
     * 
     * SQLå®ç°(XMLæ–¹å¼):
     * <update id="batchUpdateStatus">
     *     UPDATE resource SET status = #{status}
     *     WHERE id IN
     *     <foreach collection="ids" item="id" open="(" separator="," close=")">
     *         #{id}
     *     </foreach>
     * </update>
     */
    int batchUpdateStatus(@Param("ids") List<Long> ids, @Param("status") String status);

    /**
     * å¤æ‚å…³è”æŸ¥è¯¢ - å¤šè¡¨JOIN
     * 
     * ä½¿ç”¨åœºæ™¯:
     * - éœ€è¦å…³è”æŸ¥è¯¢å¤šä¸ªè¡¨
     * - éœ€è¦å¤æ‚çš„èšåˆç»Ÿè®¡
     * - å»ºè®®ä½¿ç”¨XMLæ–¹å¼,SQLæ›´æ¸…æ™°
     * 
     * @param keyword æœç´¢å…³é”®è¯
     * @return å…³è”æŸ¥è¯¢ç»“æœåˆ—è¡¨
     * 
     * XMLå®ç°ç¤ºä¾‹:
     * <select id="selectWithDetails" resultMap="ResourceDetailMap">
     *     SELECT 
     *         r.*, 
     *         u.username AS creator_name,
     *         COUNT(c.id) AS comment_count
     *     FROM resource r
     *     LEFT JOIN user u ON r.creator_id = u.id
     *     LEFT JOIN comment c ON r.id = c.resource_id
     *     WHERE r.name LIKE CONCAT('%', #{keyword}, '%')
     *     AND r.deleted = 0
     *     GROUP BY r.id
     *     ORDER BY r.create_time DESC
     * </select>
     */
    List<ResourceDetail> selectWithDetails(@Param("keyword") String keyword);
}
```

---

## 5. DTOæ•°æ®ä¼ è¾“å¯¹è±¡æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.dto;

import lombok.Data;
import javax.validation.constraints.*;
import java.time.LocalDateTime;

/**
 * ã€èµ„æºåã€‘DTO - æ•°æ®ä¼ è¾“å¯¹è±¡
 * 
 * ğŸ¯ DTOæ˜¯ä»€ä¹ˆï¼Ÿ
 * DTO (Data Transfer Object) æ•°æ®ä¼ è¾“å¯¹è±¡
 * ç”¨äºåœ¨ä¸åŒå±‚ä¹‹é—´ä¼ é€’æ•°æ®,ç‰¹åˆ«æ˜¯Controllerå’ŒServiceä¹‹é—´
 * 
 * DTO vs Entityçš„åŒºåˆ«ï¼š
 * - Entity: æ•°æ®åº“å®ä½“,ä¸æ•°æ®åº“è¡¨ä¸€ä¸€å¯¹åº”,åŒ…å«æ‰€æœ‰å­—æ®µ
 * - DTO: æ•°æ®ä¼ è¾“å¯¹è±¡,åªåŒ…å«éœ€è¦ä¼ è¾“çš„å­—æ®µ
 * 
 * ä¸ºä»€ä¹ˆéœ€è¦DTOï¼Ÿ
 * 1. å®‰å…¨æ€§: éšè—æ•æ„Ÿå­—æ®µ(å¦‚å¯†ç ã€åˆ é™¤æ ‡è®°)
 * 2. çµæ´»æ€§: å¯ä»¥ç»„åˆå¤šä¸ªEntityçš„æ•°æ®
 * 3. è§£è€¦æ€§: æ•°æ®åº“å˜æ›´ä¸å½±å“APIæ¥å£
 * 4. éªŒè¯: å¯ä»¥æ·»åŠ å‚æ•°æ ¡éªŒæ³¨è§£
 * 
 * ä¸¾ä¾‹è¯´æ˜ï¼š
 * - ç”¨æˆ·æ³¨å†Œ: RegisterRequest(åªåŒ…å«æ³¨å†Œéœ€è¦çš„å­—æ®µ)
 * - ç”¨æˆ·ä¿¡æ¯: UserDTO(ä¸åŒ…å«å¯†ç ç­‰æ•æ„Ÿå­—æ®µ)
 * - åˆ›å»ºæ–‡ç« : CreateArticleRequest(åŒ…å«æ ‡é¢˜ã€å†…å®¹ç­‰)
 * 
 * @author QA System Team
 * @version 1.0
 */
@Data  // Lombokæ³¨è§£,è‡ªåŠ¨ç”Ÿæˆgetterã€setterç­‰
public class ResourceDTO {

    /**
     * èµ„æºID - å”¯ä¸€æ ‡è¯†
     * 
     * è¯´æ˜: æ–°å¢æ—¶å‰ç«¯ä¸ä¼ ,ç”±åç«¯ç”Ÿæˆåè¿”å›
     */
    private Long id;

    /**
     * èµ„æºåç§° - å¿…å¡«å­—æ®µ
     * 
     * éªŒè¯è§„åˆ™:
     * @NotBlank: ä¸èƒ½ä¸ºç©º,ä¸”å»é™¤ç©ºæ ¼åé•¿åº¦>0
     * @Size: é•¿åº¦é™åˆ¶
     * 
     * ç¤ºä¾‹: "Spring Bootæ•™ç¨‹"
     */
    @NotBlank(message = "èµ„æºåç§°ä¸èƒ½ä¸ºç©º")
    @Size(min = 2, max = 100, message = "èµ„æºåç§°é•¿åº¦å¿…é¡»åœ¨2-100ä¹‹é—´")
    private String name;

    /**
     * èµ„æºæè¿° - å¯é€‰å­—æ®µ
     * 
     * éªŒè¯è§„åˆ™:
     * @Size: æœ€å¤§é•¿åº¦é™åˆ¶
     * 
     * ç¤ºä¾‹: "è¿™æ˜¯ä¸€ä»½è¯¦ç»†çš„Spring Bootå…¥é—¨æ•™ç¨‹..."
     */
    @Size(max = 500, message = "æè¿°é•¿åº¦ä¸èƒ½è¶…è¿‡500å­—ç¬¦")
    private String description;

    /**
     * èµ„æºç±»å‹ - æšä¸¾å€¼
     * 
     * å¯é€‰å€¼:
     * - VIDEO: è§†é¢‘
     * - DOCUMENT: æ–‡æ¡£
     * - IMAGE: å›¾ç‰‡
     * - AUDIO: éŸ³é¢‘
     * 
     * éªŒè¯è§„åˆ™:
     * @NotBlank: å¿…å¡«
     * @Pattern: æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒ,åªèƒ½æ˜¯æŒ‡å®šå€¼
     */
    @NotBlank(message = "èµ„æºç±»å‹ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "VIDEO|DOCUMENT|IMAGE|AUDIO", message = "èµ„æºç±»å‹ä¸åˆæ³•")
    private String type;

    /**
     * æ–‡ä»¶URL - æ–‡ä»¶è®¿é—®åœ°å€
     * 
     * ç¤ºä¾‹: "https://example.com/files/document.pdf"
     *      æˆ– "/uploads/2024/01/file.pdf"
     * 
     * éªŒè¯è§„åˆ™:
     * @NotBlank: å¿…å¡«
     * @Pattern: URLæ ¼å¼æ ¡éªŒ
     */
    @NotBlank(message = "æ–‡ä»¶URLä¸èƒ½ä¸ºç©º")
    private String fileUrl;

    /**
     * æ–‡ä»¶å¤§å° - å•ä½:å­—èŠ‚(Byte)
     * 
     * ç¤ºä¾‹: 1024000 (çº¦1MB)
     * 
     * éªŒè¯è§„åˆ™:
     * @Min: æœ€å°å€¼,æ–‡ä»¶å¤§å°å¿…é¡»>0
     * @Max: æœ€å¤§å€¼,é™åˆ¶æ–‡ä»¶å¤§å°(å¦‚100MB)
     */
    @Min(value = 1, message = "æ–‡ä»¶å¤§å°å¿…é¡»å¤§äº0")
    @Max(value = 104857600, message = "æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡100MB")  // 100MB = 100 * 1024 * 1024
    private Long fileSize;

    /**
     * é‚®ç®±åœ°å€ - è”ç³»æ–¹å¼
     * 
     * éªŒè¯è§„åˆ™:
     * @Email: é‚®ç®±æ ¼å¼æ ¡éªŒ
     * æ”¯æŒæ ¼å¼: username@domain.com
     */
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;

    /**
     * çŠ¶æ€ - èµ„æºçŠ¶æ€
     * 
     * å¯é€‰å€¼:
     * - ACTIVE: æ­£å¸¸
     * - INACTIVE: æœªæ¿€æ´»
     * - DELETED: å·²åˆ é™¤
     * 
     * è¯´æ˜: å‰ç«¯å±•ç¤ºæ—¶å¯ä»¥ç”¨ä¸­æ–‡æ˜ å°„
     */
    private String status;

    /**
     * åˆ›å»ºæ—¶é—´ - è®°å½•åˆ›å»ºæ—¶é—´
     * 
     * æ ¼å¼: yyyy-MM-dd HH:mm:ss
     * ç¤ºä¾‹: 2024-01-15 14:30:00
     * 
     * è¯´æ˜: 
     * - æ–°å¢æ—¶ä¸éœ€è¦å‰ç«¯ä¼ ,ç”±åç«¯è‡ªåŠ¨è®¾ç½®
     * - è¿”å›ç»™å‰ç«¯æ—¶æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²
     */
    private LocalDateTime createTime;

    /**
     * åˆ›å»ºäººåç§° - å…³è”æŸ¥è¯¢è·å¾—
     * 
     * è¯´æ˜:
     * - è¿™ä¸ªå­—æ®µä¸åœ¨resourceè¡¨ä¸­
     * - é€šè¿‡JOIN userè¡¨æŸ¥è¯¢å¾—åˆ°
     * - DTOå¯ä»¥åŒ…å«è·¨è¡¨çš„ç»„åˆæ•°æ®
     */
    private String creatorName;

    /**
     * è¯„è®ºæ•°é‡ - ç»Ÿè®¡å­—æ®µ
     * 
     * è¯´æ˜:
     * - è¿™æ˜¯ä¸€ä¸ªè®¡ç®—å­—æ®µ
     * - é€šè¿‡COUNTç»Ÿè®¡å¾—åˆ°
     * - å‰ç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨,ä¸éœ€è¦å†æ¬¡æŸ¥è¯¢
     */
    private Integer commentCount;
}

/**
 * åˆ›å»ºèµ„æºè¯·æ±‚DTO
 * 
 * ç”¨é€”: æ¥æ”¶å‰ç«¯åˆ›å»ºèµ„æºçš„è¯·æ±‚æ•°æ®
 * ç‰¹ç‚¹: ä¸åŒ…å«id(ç”±åç«¯ç”Ÿæˆ)ã€createTime(è‡ªåŠ¨å¡«å……)ç­‰å­—æ®µ
 */
@Data
public class CreateResourceRequest {
    
    @NotBlank(message = "åç§°ä¸èƒ½ä¸ºç©º")
    @Size(min = 2, max = 100, message = "åç§°é•¿åº¦2-100å­—ç¬¦")
    private String name;
    
    @Size(max = 500, message = "æè¿°ä¸è¶…è¿‡500å­—ç¬¦")
    private String description;
    
    @NotBlank(message = "ç±»å‹ä¸èƒ½ä¸ºç©º")
    private String type;
    
    @NotBlank(message = "æ–‡ä»¶URLä¸èƒ½ä¸ºç©º")
    private String fileUrl;
}

/**
 * æ›´æ–°èµ„æºè¯·æ±‚DTO
 * 
 * ç”¨é€”: æ¥æ”¶å‰ç«¯æ›´æ–°èµ„æºçš„è¯·æ±‚æ•°æ®
 * ç‰¹ç‚¹: ä¸åŒ…å«ä¸å¯ä¿®æ”¹çš„å­—æ®µ(idã€createTimeç­‰)
 */
@Data
public class UpdateResourceRequest {
    
    @NotBlank(message = "åç§°ä¸èƒ½ä¸ºç©º")
    @Size(min = 2, max = 100)
    private String name;
    
    @Size(max = 500)
    private String description;
    
    private String status;  // å¯ä»¥ä¿®æ”¹çŠ¶æ€
}
```

---

## 6. å·¥å…·ç±»æ³¨é‡Šæ¨¡æ¿

```java
package com.qasystem.common.util;

import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;

/**
 * ã€å·¥å…·åã€‘å·¥å…·ç±» - æä¾›é€šç”¨åŠŸèƒ½æ–¹æ³•
 * 
 * ğŸ¯ å·¥å…·ç±»çš„ä½œç”¨ï¼š
 * å·¥å…·ç±»å°±åƒä¸€ä¸ªå·¥å…·ç®±,æä¾›å„ç§å¸¸ç”¨çš„è¾…åŠ©åŠŸèƒ½
 * - ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
 * - æ–¹æ³•é€šå¸¸æ˜¯staticæˆ–æ³¨å…¥Springä½¿ç”¨
 * - å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨
 * 
 * å¸¸è§å·¥å…·ç±»ï¼š
 * - DateUtil: æ—¥æœŸå¤„ç†å·¥å…·
 * - StringUtil: å­—ç¬¦ä¸²å¤„ç†å·¥å…·
 * - FileUtil: æ–‡ä»¶æ“ä½œå·¥å…·
 * - JwtUtil: JWTä»¤ç‰Œå·¥å…·
 * - RedisUtil: Redisæ“ä½œå·¥å…·
 * 
 * è®¾è®¡åŸåˆ™ï¼š
 * 1. æ–¹æ³•åŠŸèƒ½å•ä¸€æ˜ç¡®
 * 2. æ— å‰¯ä½œç”¨(ä¸ä¿®æ”¹è¾“å…¥å‚æ•°)
 * 3. çº¿ç¨‹å®‰å…¨
 * 4. å……åˆ†çš„å¼‚å¸¸å¤„ç†
 * 5. è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
 * 
 * @author QA System Team
 * @version 1.0
 */
@Slf4j
@Component  // å¦‚æœéœ€è¦æ³¨å…¥å…¶ä»–Bean,ä½¿ç”¨@Component
public class UtilClass {

    /**
     * å·¥å…·æ–¹æ³•ç¤ºä¾‹ - æ–¹æ³•åŠŸèƒ½çš„ç®€çŸ­æè¿°
     * 
     * è¯¦ç»†è¯´æ˜:
     * - è¿™ä¸ªæ–¹æ³•åšä»€ä¹ˆ
     * - ä»€ä¹ˆæ—¶å€™ä½¿ç”¨
     * - æœ‰ä»€ä¹ˆé™åˆ¶æˆ–æ³¨æ„äº‹é¡¹
     * 
     * ä½¿ç”¨ç¤ºä¾‹:
     * ```java
     * String result = UtilClass.methodName("input");
     * System.out.println(result);  // è¾“å‡º: ...
     * ```
     * 
     * @param param1 å‚æ•°1çš„è¯´æ˜
     * @param param2 å‚æ•°2çš„è¯´æ˜
     * @return è¿”å›å€¼è¯´æ˜
     * @throws Exception å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸åŠåŸå› 
     */
    public static String methodName(String param1, Object param2) {
        // 1. å‚æ•°æ ¡éªŒ
        if (param1 == null || param1.trim().isEmpty()) {
            throw new IllegalArgumentException("param1ä¸èƒ½ä¸ºç©º");
        }
        
        // 2. ä¸šåŠ¡å¤„ç†
        try {
            // å…·ä½“é€»è¾‘
            String result = doSomething(param1, param2);
            return result;
        } catch (Exception e) {
            // 3. å¼‚å¸¸å¤„ç†
            log.error("å¤„ç†å¤±è´¥: param1={}, error={}", param1, e.getMessage(), e);
            throw new RuntimeException("å¤„ç†å¤±è´¥", e);
        }
    }
}
```

---

## 7. é…ç½®ç±»æ³¨é‡Šæ¨¡æ¿

è§å‰é¢å·²å®Œæˆçš„ `RedisConfig.java`ã€`WebConfig.java` ç­‰ç¤ºä¾‹ã€‚

---

## æ€»ç»“

### âœ… å·²å®Œæˆæ³¨é‡Šçš„æ–‡ä»¶
1. `QaSystemApplication.java` - ä¸»å¯åŠ¨ç±»
2. `WebConfig.java` - Webé…ç½®ç±»
3. `RedisConfig.java` - Redisé…ç½®ç±»
4. `JwtUtil.java` - JWTå·¥å…·ç±»(éƒ¨åˆ†)
5. `AuthController.java` - è®¤è¯æ§åˆ¶å™¨

### ğŸ“‹ å‰©ä½™éœ€è¦æ³¨é‡Šçš„æ–‡ä»¶ç±»å‹
- å…¶ä»–é…ç½®ç±»(ConfigåŒ…)
- å®ä½“ç±»(EntityåŒ…) - çº¦15ä¸ª
- DTOç±»(DTOåŒ…) - çº¦15ä¸ª
- Mapperæ¥å£(MapperåŒ…) - çº¦15ä¸ª
- Serviceæ¥å£å’Œå®ç°(ServiceåŒ…) - çº¦20ä¸ª
- Controllerç±»(ControlleråŒ…) - çº¦12ä¸ª
- å·¥å…·ç±»å’Œé€šç”¨ç±»
- å®‰å…¨å’Œå¼‚å¸¸å¤„ç†ç±»
- WebSocketç±»

### ğŸ’¡ å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿
1. æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©å¯¹åº”çš„æ¨¡æ¿
2. å¤åˆ¶æ¨¡æ¿åˆ°æ‚¨çš„ä»£ç æ–‡ä»¶
3. æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´æ³¨é‡Šå†…å®¹
4. ä¿æŒæ³¨é‡Šé£æ ¼ä¸€è‡´

### ğŸ“ æ³¨é‡Šè¦ç‚¹
- ç”¨ç”Ÿæ´»åŒ–çš„æ¯”å–»è§£é‡ŠæŠ€æœ¯æ¦‚å¿µ
- æä¾›å…·ä½“çš„ä½¿ç”¨ç¤ºä¾‹
- è¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡
- æ ‡æ³¨æ³¨æ„äº‹é¡¹å’Œå¸¸è§é™·é˜±
- ä¿æŒè¯­è¨€ç®€å•æ˜“æ‡‚
