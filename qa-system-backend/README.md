# ğŸ“ å¸ˆç”Ÿç­”ç–‘ç³»ç»Ÿ v2.0 - åç«¯æœåŠ¡

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.1.5-6DB33F.svg?logo=springboot&logoColor=white)
![Java](https://img.shields.io/badge/Java-17-ED8B00.svg?logo=openjdk&logoColor=white)
![MyBatis-Plus](https://img.shields.io/badge/MyBatis--Plus-3.5.7-blue.svg)
![Redis](https://img.shields.io/badge/Redis-6.0+-DC382D.svg?logo=redis&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1.svg?logo=mysql&logoColor=white)
![LangChain4j](https://img.shields.io/badge/LangChain4j-0.35.0-FF6B35.svg)
![WebSocket](https://img.shields.io/badge/WebSocket-Enabled-010101.svg)
![Docker](https://img.shields.io/badge/Docker-Ready-2496ED.svg?logo=docker&logoColor=white)

> ğŸš€ ä¸€ä¸ªç°ä»£åŒ–çš„å¸ˆç”Ÿäº’åŠ¨ç­”ç–‘å¹³å°åç«¯æœåŠ¡ï¼Œé›†æˆAIæ™ºèƒ½åŠ©æ‰‹ã€æ–‡æ¡£æŸ¥é‡é™é‡ã€å®æ—¶é—®ç­”å’Œäº¤æµè®ºå›åŠŸèƒ½ã€‚

---

## ğŸ“‘ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [æ•°æ®åº“è®¾è®¡](#-æ•°æ®åº“è®¾è®¡)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½æè¿° | çŠ¶æ€ |
|------|----------|------|
| **ç”¨æˆ·è®¤è¯** | JWT Tokenè®¤è¯ã€è§’è‰²æƒé™ç®¡ç†ã€å®‰å…¨ç™»å½•æ³¨å†Œ | âœ… |
| **é—®ç­”ç³»ç»Ÿ** | å­¦ç”Ÿæé—®ã€æ•™å¸ˆè§£ç­”ã€é—®é¢˜åˆ†ç±»ã€é‡‡çº³å›ç­” | âœ… |
| **äº¤æµè®ºå›** | å¸–å­å‘å¸ƒã€è¯„è®ºå›å¤ã€ç‚¹èµæ”¶è—ã€å…³æ³¨ç”¨æˆ· | âœ… |
| **AIåŠ©æ‰‹** | æ™ºèƒ½å¯¹è¯ã€å¤šè½®ä¼šè¯ã€æµå¼å“åº”ã€å¯¹è¯å†å² | âœ… |
| **æ–‡æ¡£å·¥ä½œå°** | æ–‡æ¡£ä¸Šä¼ ã€æŸ¥é‡æ£€æµ‹ã€AIé™é‡æ”¹å†™ã€æ•æ„Ÿè¯è¿‡æ»¤ | âœ… |
| **åå°ç®¡ç†** | ç”¨æˆ·ç®¡ç†ã€å†…å®¹å®¡æ ¸ã€æ•°æ®ç»Ÿè®¡ã€ç³»ç»Ÿé…ç½® | âœ… |

### ğŸ¤– AIæ™ºèƒ½åŠŸèƒ½

- **å¤šæ¨¡å‹æ”¯æŒ** - æ”¯æŒç¡…åŸºæµåŠ¨(SiliconFlow)ã€é€šä¹‰åƒé—®ç­‰å¤šç§AIæ¨¡å‹
- **æµå¼å¯¹è¯** - åŸºäºSSEå®æ—¶æ¨é€ï¼Œæ‰“å­—æœºæ•ˆæœè¾“å‡º
- **ä¸Šä¸‹æ–‡è®°å¿†** - å¤šè½®å¯¹è¯ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§
- **æ™ºèƒ½é™é‡** - AIè¾…åŠ©æ–‡æ¡£å†…å®¹æ”¹å†™é™é‡
- **æ•æ„Ÿè¯æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å¹¶è¿‡æ»¤æ•æ„Ÿå†…å®¹

### ğŸ“„ æ–‡æ¡£å¤„ç†åŠŸèƒ½

- **æ–‡æ¡£è§£æ** - æ”¯æŒ `.docx` Wordæ–‡æ¡£è§£æ
- **ç›¸ä¼¼åº¦æ£€æµ‹** - åŸºäºæ®µè½çº§åˆ«çš„å†…å®¹æŸ¥é‡
- **AIé™é‡æ”¹å†™** - WebSocketæµå¼è¾“å‡ºæ”¹å†™ç»“æœ
- **ç‰ˆæœ¬ç®¡ç†** - ä¿å­˜æ”¹å†™å†å²ï¼Œæ”¯æŒå›æº¯
- **æ“ä½œæ—¥å¿—** - å®Œæ•´è®°å½•æ–‡æ¡£æ“ä½œè½¨è¿¹

---

## ï¿½ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Spring Boot** | 3.1.5 | æ ¸å¿ƒæ¡†æ¶ |
| **Spring Security** | 6.1.5 | å®‰å…¨è®¤è¯æ¡†æ¶ |
| **Spring WebSocket** | - | å®æ—¶é€šä¿¡æ”¯æŒ |
| **MyBatis-Plus** | 3.5.7 | ORMå¢å¼ºæ¡†æ¶ |
| **JWT (jjwt)** | 0.12.3 | Tokenè®¤è¯ |
| **Redis** | 6.0+ | ç¼“å­˜ã€ä¼šè¯ç®¡ç† |
| **MySQL** | 8.0+ | å…³ç³»å‹æ•°æ®åº“ |
| **LangChain4j** | 0.35.0 | AIæ¨¡å‹é›†æˆæ¡†æ¶ |
| **Apache POI** | 5.2.5 | Wordæ–‡æ¡£è§£æ |
| **Hutool** | 5.8.25 | Javaå·¥å…·åº“ |
| **Lombok** | - | ä»£ç ç®€åŒ– |
| **Micrometer** | - | åº”ç”¨ç›‘æ§æŒ‡æ ‡ |

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯åº”ç”¨ (Vue 3)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Spring Boot åº”ç”¨å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AuthControllerâ”‚ QuestionCtrl â”‚  ForumCtrl   â”‚  DocControllerâ”‚  â”‚
â”‚  â”‚ AdminControllerâ”‚ AnswerCtrl  â”‚  AiAssistant â”‚  UploadCtrl  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      Service ä¸šåŠ¡å±‚                          â”‚â”‚
â”‚  â”‚  AuthService | QuestionService | ForumService | DocService  â”‚â”‚
â”‚  â”‚  AdminService | AnswerService | AiAssistantService          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      Mapper æ•°æ®å±‚                           â”‚â”‚
â”‚  â”‚              MyBatis-Plus + MySQL 8.0                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚  MySQL  â”‚         â”‚   Redis   â”‚        â”‚ AI API  â”‚
    â”‚ æ•°æ®å­˜å‚¨ â”‚         â”‚ ç¼“å­˜/ä¼šè¯  â”‚        â”‚ ç¡…åŸºæµåŠ¨ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
qa-system-backend/
â”œâ”€â”€ ğŸ“‚ src/main/java/com/qasystem/
â”‚   â”œâ”€â”€ ğŸ“„ QaSystemApplication.java      # åº”ç”¨å¯åŠ¨ç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ controller/                   # æ§åˆ¶å™¨å±‚ (16ä¸ª)
â”‚   â”‚   â”œâ”€â”€ AuthController.java          # è®¤è¯ï¼šç™»å½•/æ³¨å†Œ/ç™»å‡º
â”‚   â”‚   â”œâ”€â”€ AdminController.java         # ç®¡ç†ï¼šç”¨æˆ·/æ•°æ®ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ QuestionController.java      # é—®é¢˜ï¼šå‘å¸ƒ/æŸ¥è¯¢/ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ AnswerController.java        # å›ç­”ï¼šæäº¤/é‡‡çº³/è¯„ä»·
â”‚   â”‚   â”œâ”€â”€ ForumController.java         # è®ºå›ï¼šå¸–å­/è¯„è®º/äº’åŠ¨
â”‚   â”‚   â”œâ”€â”€ AiAssistantController.java   # AIï¼šå¯¹è¯/å†å²/åé¦ˆ
â”‚   â”‚   â”œâ”€â”€ DocController.java           # æ–‡æ¡£ï¼šä¸Šä¼ /æŸ¥é‡/é™é‡
â”‚   â”‚   â”œâ”€â”€ DocAdminController.java      # æ–‡æ¡£ç®¡ç†ï¼šé…ç½®/å®¡æ ¸
â”‚   â”‚   â”œâ”€â”€ DocSensitiveWordAdminController.java  # æ•æ„Ÿè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ DocOperationLogAdminController.java   # æ“ä½œæ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ CollectionController.java    # æ”¶è—ï¼šé—®é¢˜/å¸–å­æ”¶è—
â”‚   â”‚   â”œâ”€â”€ FollowController.java        # å…³æ³¨ï¼šç”¨æˆ·å…³æ³¨/ç²‰ä¸
â”‚   â”‚   â”œâ”€â”€ ProfileController.java       # ä¸ªäººä¸­å¿ƒï¼šèµ„æ–™/è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ SubjectController.java       # ç§‘ç›®ï¼šåˆ†ç±»ç®¡ç†
â”‚   â”‚   â””â”€â”€ UploadController.java        # ä¸Šä¼ ï¼šå›¾ç‰‡/æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ service/                      # æœåŠ¡å±‚ (15ä¸ªå®ç°)
â”‚   â”‚   â”œâ”€â”€ impl/                        # æœåŠ¡å®ç°ç±»
â”‚   â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”‚   â”œâ”€â”€ AiAssistantService.java      # AIæ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ AiModelConfigService.java    # AIæ¨¡å‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ DocService.java              # æ–‡æ¡£å¤„ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ DocContentFilterService.java # å†…å®¹è¿‡æ»¤æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ DocSensitiveWordService.java # æ•æ„Ÿè¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ entity/                       # å®ä½“ç±» (17ä¸ª)
â”‚   â”‚   â”œâ”€â”€ User.java                    # ç”¨æˆ·åŸºç¡€è¡¨
â”‚   â”‚   â”œâ”€â”€ Student.java                 # å­¦ç”Ÿä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ Teacher.java                 # æ•™å¸ˆä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ Question.java                # é—®é¢˜
â”‚   â”‚   â”œâ”€â”€ Answer.java                  # å›ç­”
â”‚   â”‚   â”œâ”€â”€ Forum.java                   # è®ºå›å¸–å­
â”‚   â”‚   â”œâ”€â”€ Subject.java                 # ç§‘ç›®
â”‚   â”‚   â”œâ”€â”€ AiConversation.java          # AIå¯¹è¯è®°å½•
â”‚   â”‚   â”œâ”€â”€ AiModelConfig.java           # AIæ¨¡å‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ DocDocument.java             # æ–‡æ¡£ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ DocParagraph.java            # æ–‡æ¡£æ®µè½
â”‚   â”‚   â”œâ”€â”€ DocRewriteVersion.java       # æ”¹å†™ç‰ˆæœ¬
â”‚   â”‚   â”œâ”€â”€ DocSensitiveWord.java        # æ•æ„Ÿè¯
â”‚   â”‚   â”œâ”€â”€ DocConfig.java               # æ–‡æ¡£é…ç½®
â”‚   â”‚   â”œâ”€â”€ DocOperationLog.java         # æ“ä½œæ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ Follow.java                  # å…³æ³¨å…³ç³»
â”‚   â”‚   â””â”€â”€ UserCollection.java          # æ”¶è—è®°å½•
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ dto/                          # æ•°æ®ä¼ è¾“å¯¹è±¡ (19ä¸ª)
â”‚   â”œâ”€â”€ ğŸ“‚ mapper/                       # MyBatisæ˜ å°„ (18ä¸ª)
â”‚   â”œâ”€â”€ ğŸ“‚ config/                       # é…ç½®ç±» (6ä¸ª)
â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java          # Spring Securityé…ç½®
â”‚   â”‚   â”œâ”€â”€ WebSocketConfig.java         # WebSocketé…ç½®
â”‚   â”‚   â”œâ”€â”€ RedisConfig.java             # Redisé…ç½®
â”‚   â”‚   â”œâ”€â”€ CorsConfig.java              # è·¨åŸŸé…ç½®
â”‚   â”‚   â””â”€â”€ MyBatisPlusConfig.java       # ORMé…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ security/                     # å®‰å…¨æ¨¡å— (3ä¸ª)
â”‚   â”‚   â”œâ”€â”€ JwtTokenProvider.java        # JWTå·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java # JWTè¿‡æ»¤å™¨
â”‚   â”‚   â””â”€â”€ CustomUserDetailsService.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ websocket/                    # WebSocketå¤„ç†
â”‚   â”‚   â””â”€â”€ DocRewriteWebSocketHandler.java  # é™é‡æµå¼è¾“å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ common/                       # å…¬å…±æ¨¡å—
â”‚   â”‚   â””â”€â”€ ApiResponse.java             # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ exception/                    # å¼‚å¸¸å¤„ç†
â”‚       â””â”€â”€ GlobalExceptionHandler.java
â”‚
â”œâ”€â”€ ğŸ“‚ src/main/resources/
â”‚   â”œâ”€â”€ application.yml                  # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ application-dev.yml              # å¼€å‘ç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ db/migrations/                    # æ•°æ®åº“è¿ç§»è„šæœ¬
â”œâ”€â”€ ğŸ“„ Dockerfile                        # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ pom.xml                           # Mavenä¾èµ–é…ç½®
â””â”€â”€ ğŸ“„ README.md                         # é¡¹ç›®æ–‡æ¡£
```

---

## ï¿½ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| ç¯å¢ƒ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| **JDK** | 17+ | å¿…é¡»ä½¿ç”¨Java 17æˆ–æ›´é«˜ç‰ˆæœ¬ |
| **Maven** | 3.8+ | é¡¹ç›®æ„å»ºå·¥å…· |
| **MySQL** | 8.0+ | æ•°æ®åº“ |
| **Redis** | 6.0+ | ç¼“å­˜æœåŠ¡ |

### æœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/qa-system.git
cd qa-system/qa-system-backend

# 2. åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE qa_system_v2 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 3. å¯¼å…¥æ•°æ®åº“è„šæœ¬
mysql -u root -p qa_system_v2 < db/migrations/init.sql

# 4. ä¿®æ”¹é…ç½®æ–‡ä»¶ (å¯é€‰ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æ›´ä½³)
# ç¼–è¾‘ src/main/resources/application.yml

# 5. å¯åŠ¨åº”ç”¨
mvn spring-boot:run

# æˆ–è€…æ‰“åŒ…åè¿è¡Œ
mvn clean package -DskipTests
java -jar target/qa-system-backend-2.0.0.jar
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# æ•°æ®åº“é…ç½®
export DB_HOST=localhost
export DB_PORT=3306
export DB_NAME=qa_system_v2
export DB_USERNAME=root
export DB_PASSWORD=your_password

# Redisé…ç½®
export REDIS_HOST=localhost
export REDIS_PORT=6379
export REDIS_PASSWORD=

# JWTé…ç½®
export JWT_SECRET=your-very-long-and-secure-secret-key

# AIæœåŠ¡é…ç½® (ç¡…åŸºæµåŠ¨)
export SILICONFLOW_API_KEY=sk-your-api-key
```

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t qa-system-backend:2.0.0 .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name qa-backend \
  -p 8080:8080 \
  -e DB_HOST=host.docker.internal \
  -e DB_PASSWORD=your_password \
  -e REDIS_HOST=host.docker.internal \
  -e SILICONFLOW_API_KEY=sk-your-key \
  qa-system-backend:2.0.0
```

---

## ğŸ“ APIæ–‡æ¡£

### æ¥å£æ¦‚è§ˆ

| æ¨¡å— | åŸºç¡€è·¯å¾„ | æè¿° |
|------|----------|------|
| è®¤è¯ | `/api/v1/auth` | ç™»å½•ã€æ³¨å†Œã€ç™»å‡º |
| é—®é¢˜ | `/api/v1/questions` | é—®é¢˜CRUDæ“ä½œ |
| å›ç­” | `/api/v1/answers` | å›ç­”CRUDæ“ä½œ |
| è®ºå› | `/forum` | å¸–å­ã€è¯„è®ºã€äº’åŠ¨ |
| AIåŠ©æ‰‹ | `/api/ai` | æ™ºèƒ½å¯¹è¯æœåŠ¡ |
| æ–‡æ¡£ | `/api/v1/doc` | æ–‡æ¡£å¤„ç†æœåŠ¡ |
| æ”¶è— | `/api/v1/collections` | æ”¶è—ç®¡ç† |
| å…³æ³¨ | `/api/v1/follows` | å…³æ³¨å…³ç³» |
| ç§‘ç›® | `/api/v1/subjects` | ç§‘ç›®ç®¡ç† |
| ä¸Šä¼  | `/api/v1/upload` | æ–‡ä»¶ä¸Šä¼  |
| ä¸ªäºº | `/api/v1/profile` | ä¸ªäººä¸­å¿ƒ |
| ç®¡ç† | `/api/v1/admin` | åå°ç®¡ç† |

### è®¤è¯æ¥å£

```http
POST   /api/v1/auth/login           # ç”¨æˆ·ç™»å½•
POST   /api/v1/auth/register        # ç”¨æˆ·æ³¨å†Œ
POST   /api/v1/auth/logout          # é€€å‡ºç™»å½•
GET    /api/v1/auth/me              # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```

### é—®ç­”æ¥å£

```http
GET    /api/v1/questions            # è·å–é—®é¢˜åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€ç­›é€‰)
POST   /api/v1/questions            # å‘å¸ƒæ–°é—®é¢˜
GET    /api/v1/questions/{id}       # è·å–é—®é¢˜è¯¦æƒ…
PUT    /api/v1/questions/{id}       # æ›´æ–°é—®é¢˜
DELETE /api/v1/questions/{id}       # åˆ é™¤é—®é¢˜

GET    /api/v1/answers              # è·å–å›ç­”åˆ—è¡¨
POST   /api/v1/answers              # æäº¤å›ç­”
PUT    /api/v1/answers/{id}/accept  # é‡‡çº³å›ç­”
```

### AIåŠ©æ‰‹æ¥å£

```http
POST   /api/ai/chat                 # å‘é€å¯¹è¯æ¶ˆæ¯ (SSEæµå¼å“åº”)
GET    /api/ai/sessions             # è·å–ä¼šè¯åˆ—è¡¨
POST   /api/ai/sessions             # åˆ›å»ºæ–°ä¼šè¯
GET    /api/ai/sessions/{id}/history    # è·å–ä¼šè¯å†å²
DELETE /api/ai/sessions/{id}        # åˆ é™¤ä¼šè¯
POST   /api/ai/messages/{id}/bookmark   # æ”¶è—æ¶ˆæ¯
POST   /api/ai/messages/{id}/feedback   # æ¶ˆæ¯åé¦ˆ
```

### æ–‡æ¡£å·¥ä½œå°æ¥å£

```http
POST   /api/v1/doc/upload           # ä¸Šä¼ æ–‡æ¡£
GET    /api/v1/doc/list             # è·å–æ–‡æ¡£åˆ—è¡¨
GET    /api/v1/doc/{id}             # è·å–æ–‡æ¡£è¯¦æƒ…
GET    /api/v1/doc/{id}/paragraphs  # è·å–æ–‡æ¡£æ®µè½
POST   /api/v1/doc/{id}/check       # æ‰§è¡ŒæŸ¥é‡æ£€æµ‹
POST   /api/v1/doc/paragraph/{id}/rewrite  # AIé™é‡æ”¹å†™ (WebSocket)
GET    /api/v1/doc/{id}/versions    # è·å–æ”¹å†™ç‰ˆæœ¬å†å²
```

### ç®¡ç†æ¥å£

```http
GET    /api/v1/admin/dashboard      # æ•°æ®ç»Ÿè®¡é¢æ¿
GET    /api/v1/admin/students       # å­¦ç”Ÿåˆ—è¡¨ç®¡ç†
GET    /api/v1/admin/teachers       # æ•™å¸ˆåˆ—è¡¨ç®¡ç†
PUT    /api/v1/admin/users/{id}/status  # æ›´æ–°ç”¨æˆ·çŠ¶æ€
GET    /api/v1/admin/doc/config     # æŸ¥é‡é…ç½®ç®¡ç†
PUT    /api/v1/admin/doc/config     # æ›´æ–°æŸ¥é‡é…ç½®
GET    /api/v1/admin/doc/sensitive-words  # æ•æ„Ÿè¯ç®¡ç†
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ `application.yml`

```yaml
spring:
  application:
    name: qa-service
  profiles:
    active: dev

  # æ•°æ®æºé…ç½®
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:qa_system_v2}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:123456}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5

  # Redisé…ç½®
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}

  # æ–‡ä»¶ä¸Šä¼ é™åˆ¶
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

# JWTé…ç½®
jwt:
  secret: ${JWT_SECRET:your-secret-key}
  expiration: 604800000         # 7å¤©
  refresh-expiration: 2592000000 # 30å¤©

# LangChain4j AIé…ç½® (ç¡…åŸºæµåŠ¨)
langchain4j:
  open-ai:
    api-key: ${SILICONFLOW_API_KEY}
    base-url: https://api.siliconflow.cn/v1
    model-name: Qwen/Qwen2.5-7B-Instruct
    temperature: 0.7
    timeout: 60s
    max-tokens: 2000

# è…¾è®¯äº‘COSé…ç½® (å¯é€‰)
cos:
  client:
    secretId: your-secret-id
    secretKey: your-secret-key
    region: ap-beijing
    bucket: your-bucket-name

# ç›‘æ§ç«¯ç‚¹
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
```

---

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æ„å»ºåº”ç”¨

```bash
mvn clean package -DskipTests -Pprod
```

#### 2. æœåŠ¡å™¨éƒ¨ç½²

```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
mkdir -p /opt/qa-system
cd /opt/qa-system

# ä¸Šä¼ jaråŒ…
scp target/qa-system-backend-2.0.0.jar server:/opt/qa-system/

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > start.sh << 'EOF'
#!/bin/bash
nohup java -Xms512m -Xmx1024m \
  -jar qa-system-backend-2.0.0.jar \
  --spring.profiles.active=prod \
  > logs/app.log 2>&1 &
EOF

chmod +x start.sh
./start.sh
```

#### 3. Nginxåå‘ä»£ç†

```nginx
upstream qa-backend {
    server 127.0.0.1:8080;
    keepalive 32;
}

server {
    listen 80;
    server_name api.your-domain.com;

    # APIä»£ç†
    location /api {
        proxy_pass http://qa-backend;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # WebSocketä»£ç† (æ–‡æ¡£é™é‡)
    location /ws {
        proxy_pass http://qa-backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # SSEä»£ç† (AIå¯¹è¯)
    location /api/ai/chat {
        proxy_pass http://qa-backend;
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_buffering off;
        proxy_cache off;
    }
}
```

#### 4. SystemdæœåŠ¡

```ini
# /etc/systemd/system/qa-system.service
[Unit]
Description=QA System Backend
After=network.target mysql.service redis.service

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/qa-system
ExecStart=/usr/bin/java -Xms512m -Xmx1024m -jar qa-system-backend-2.0.0.jar
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

---

## ï¿½ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

| è¡¨å | è¯´æ˜ | ä¸»è¦å­—æ®µ |
|------|------|----------|
| `user` | ç”¨æˆ·è¡¨ | id, username, password, role, status |
| `student` | å­¦ç”Ÿä¿¡æ¯ | id, user_id, student_no, college, major, grade |
| `teacher` | æ•™å¸ˆä¿¡æ¯ | id, user_id, teacher_no, title, research |
| `question` | é—®é¢˜è¡¨ | id, user_id, subject_id, title, content, status |
| `answer` | å›ç­”è¡¨ | id, question_id, user_id, content, is_accepted |
| `subject` | ç§‘ç›®è¡¨ | id, name, description |
| `forum` | è®ºå›å¸–å­ | id, user_id, title, content, likes, views |
| `follow` | å…³æ³¨å…³ç³» | id, follower_id, following_id |
| `user_collection` | æ”¶è—è¡¨ | id, user_id, target_id, target_type |
| `ai_conversation` | AIå¯¹è¯ | id, user_id, session_id, role, content |
| `ai_model_config` | AIæ¨¡å‹é…ç½® | id, model_name, api_key, is_active |
| `doc_document` | æ–‡æ¡£è¡¨ | id, user_id, filename, status |
| `doc_paragraph` | æ–‡æ¡£æ®µè½ | id, doc_id, content, similarity_rate |
| `doc_rewrite_version` | æ”¹å†™ç‰ˆæœ¬ | id, paragraph_id, content, version |
| `doc_sensitive_word` | æ•æ„Ÿè¯ | id, word, category, level |
| `doc_config` | æ–‡æ¡£é…ç½® | id, similarity_threshold, rewrite_model |
| `doc_operation_log` | æ“ä½œæ—¥å¿— | id, user_id, doc_id, operation, details |

---

## ğŸ‘¥ ç”¨æˆ·è§’è‰²ä¸æƒé™

| è§’è‰² | æƒé™èŒƒå›´ |
|------|----------|
| **STUDENT** | æé—®ã€è¯„è®ºã€æ”¶è—ã€å…³æ³¨ã€ä½¿ç”¨AIåŠ©æ‰‹ã€æ–‡æ¡£å·¥ä½œå° |
| **TEACHER** | å…¨éƒ¨å­¦ç”Ÿæƒé™ + å›ç­”é—®é¢˜ã€ç®¡ç†è‡ªå·±çš„å›ç­” |
| **ADMIN** | å…¨éƒ¨æƒé™ + ç”¨æˆ·ç®¡ç†ã€å†…å®¹å®¡æ ¸ã€ç³»ç»Ÿé…ç½® |

---

## ğŸ“ˆ ç›‘æ§ä¸å¥åº·æ£€æŸ¥

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/actuator/health

# åº”ç”¨ä¿¡æ¯
curl http://localhost:8080/actuator/info

# PrometheusæŒ‡æ ‡
curl http://localhost:8080/actuator/prometheus
```

---

## ğŸ™ æŠ€æœ¯è‡´è°¢

- [Spring Boot](https://spring.io/projects/spring-boot) - æ ¸å¿ƒæ¡†æ¶
- [LangChain4j](https://docs.langchain4j.dev/) - AIé›†æˆæ¡†æ¶
- [MyBatis-Plus](https://baomidou.com/) - ORMå¢å¼º
- [ç¡…åŸºæµåŠ¨](https://siliconflow.cn/) - AIæ¨¡å‹æœåŠ¡
- [Hutool](https://hutool.cn/) - Javaå·¥å…·åº“

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®

---

<p align="center">
  <b>â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ªStaræ”¯æŒï¼</b>
</p>
