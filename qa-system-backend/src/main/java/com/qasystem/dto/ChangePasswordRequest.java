package com.qasystem.dto;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Pattern;
import lombok.Data;

/**
 * ChangePasswordRequest - ä¿®æ”¹å¯†ç è¯·æ±‚æ•°æ®ä¼ è¾“å¯¹è±¡
 * 
 * ğŸ¯ ä½œç”¨ï¼šç”¨æˆ·ä¿®æ”¹å¯†ç æ—¶ä»å‰ç«¯æ¥æ”¶çš„æ•°æ®
 * ç”¨äºåœ¨ä¸ªäººä¸­å¿ƒâ€œä¿®æ”¹å¯†ç â€åŠŸèƒ½ï¼Œéœ€è¦éªŒè¯åŸå¯†ç æ‰èƒ½ä¿®æ”¹ã€‚
 * 
 * ğŸ“ å­—æ®µè¯´æ˜ï¼š
 * - oldPassword: åŸå¯†ç ï¼ˆå¿…å¡«ï¼‰ï¼Œç”¨äºéªŒè¯èº«ä»½
 * - newPassword: æ–°å¯†ç ï¼ˆå¿…å¡«ï¼‰ï¼Œå¿…é¡»ç¬¦åˆå¯†ç å¼ºåº¦è¦æ±‚
 * - confirmPassword: ç¡®è®¤å¯†ç ï¼ˆå¿…å¡«ï¼‰ï¼Œå¿…é¡»ä¸newPasswordä¸€è‡´
 * 
 * ğŸ’¬ è¯·æ±‚ç¤ºä¾‹ï¼š
 * {
 *   "oldPassword": "abc123",
 *   "newPassword": "newPass456",
 *   "confirmPassword": "newPass456"
 * }
 * 
 * âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
 * 1. å¯†ç å¼ºåº¦ï¼šå¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—ï¼Œé•¿åº¦6-20ä½ï¼Œå¯åŒ…å«ç‰¹æ®Šå­—ç¬¦
 * 2. åç«¯ä¼šéªŒè¯oldPasswordæ˜¯å¦æ­£ç¡®
 * 3. åç«¯ä¼šéªŒè¯newPasswordå’ŒconfirmPasswordæ˜¯å¦ä¸€è‡´
 * 4. å»ºè®®å¯†ç åœ¨å‰ç«¯åŠ å¯†æˆ–é€šè¿‡HTTPSä¼ è¾“
 * 
 * ğŸ’¡ ä½¿ç”¨åœºæ™¯ï¼š
 * - ç”¨æˆ·åœ¨ä¸ªäººä¸­å¿ƒç‚¹å‡»"ä¿®æ”¹å¯†ç "ï¼Œå¡«å†™è¡¨å•åæäº¤
 * - å‰ç«¯ä¼šè°ƒç”¨ POST /api/user/change-password æ¥å£
 */
@Data
public class ChangePasswordRequest {
    
    /**
     * åŸå¯†ç ï¼ˆå¿…å¡«ï¼‰
     * ç”¨äºéªŒè¯æ˜¯å¦ä¸ºæœ¬äººæ“ä½œï¼Œé˜²æ­¢ä»–äººç›—ç”¨è´¦å·
     * åç«¯ä¼šä¸æ•°æ®åº“ä¸­çš„å¯†ç è¿›è¡Œæ¯”å¯¹
     */
    @NotBlank(message = "åŸå¯†ç ä¸èƒ½ä¸ºç©º")
    private String oldPassword;
    
    /**
     * æ–°å¯†ç ï¼ˆå¿…å¡«ï¼‰
     * å¿…é¡¾ç¬¦åˆå¯†ç å¼ºåº¦è¦æ±‚ï¼š6-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—
     * ç¤ºä¾‹ï¼šnewPass123, MyPwd2024
     */
    @NotBlank(message = "æ–°å¯†ç ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d@$!%*#?&]{6,20}$", 
             message = "å¯†ç å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—ï¼Œé•¿åº¦6-20ä½")
    private String newPassword;
    
    /**
     * ç¡®è®¤å¯†ç ï¼ˆå¿…å¡«ï¼‰
     * å¿…é¡»ä¸æ–°å¯†ç å®Œå…¨ä¸€è‡´ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥é”™è¯¯
     * åç«¯ä¼šéªŒè¯ä¸¤æ¬¡å¯†ç æ˜¯å¦ç›¸åŒ
     */
    @NotBlank(message = "ç¡®è®¤å¯†ç ä¸èƒ½ä¸ºç©º")
    private String confirmPassword;
}

